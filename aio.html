<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to R: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/lc/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/lc/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/lc/favicon-16x16.png">
<link rel="manifest" href="favicons/lc/site.webmanifest">
<link rel="mask-icon" href="favicons/lc/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav library"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="lc-logo" alt="Library Carpentry" src="assets/images/library-logo.svg"><span class="badge text-bg-warning">
          <abbr title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
              Alpha
            </a>
            <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav library" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Library Carpentry" src="assets/images/library-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to R
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to R
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to R
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress library">
    <div class="progress-bar library" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-before-we-start.html">1. Before we Start</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="01-intro-to-r.html">2. Introduction to R</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="02-starting-with-data.html">3. Starting with Data</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="03-data-cleaning-and-transformation.html">4. Data cleaning &amp; transformation with dplyr</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="04-data-viz-ggplot.html">5. Data Visualisation with ggplot2</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li>
<li><a href="reference.html">Glossary</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-00-before-we-start"><p>Content from <a href="00-before-we-start.html">Before we Start</a></p>
<hr>
<p>Last updated on 2025-06-03 |

        <a href="https://github.com/librarycarpentry/lc-r/edit/main/episodes/00-before-we-start.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is R and why learn it?</li>
<li>How to find your way around RStudio?</li>
<li>How to interact with R?</li>
<li>How to install packages?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Navigate the RStudio interface.</li>
<li>Create an R project for project analysis.</li>
<li>Install additional packages using the packages tab.</li>
<li>Install additional packages using R code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>This episode is adapted from <a href="https://datacarpentry.org/r-socialsci/00-intro/index.html" class="external-link">Before
We Start</a> from the R for Social Scientists Carpentry lesson, licensed
under a <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">Creative
Commons Attribution 4.0 License</a> (CC BY 4.0).</p>
<section><h2 class="section-heading" id="what-is-r-what-is-rstudio">What is R? What is RStudio?<a class="anchor" aria-label="anchor" href="#what-is-r-what-is-rstudio"></a>
</h2>
<hr class="half-width">
<p><code>R</code> is more of a programming language than just a
statistics program. It was started by Robert Gentleman and Ross Ihaka
from the University of Auckland in 1995. They <a href="https://doi.org/10.2307/1390807" class="external-link">described it as</a> “a language
for data analysis and graphics.” You can use R to create, import, and
scrape data from the web; clean and reshape it; visualize it; run
statistical analysis and modeling operations on it; text and data mine
it; and much more. The term “<code>R</code>” is used to refer to both
the programming language and the software that interprets the scripts
written using it.</p>
<div id="rstudio-a-user-interface-for-r" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="rstudio-a-user-interface-for-r" class="callout-inner">
<h3 class="callout-title">RStudio: a user interface for R</h3>
<div class="callout-content">
<p><a href="https://rstudio.com" class="external-link">RStudio</a> is a user interface for
working with R. It is called an Integrated Development Environment
(IDE): a piece of software that provides tools to make programming
easier. RStudio acts as a sort of wrapper around the R language. You can
use R without RStudio, but it’s much more limiting. RStudio makes it
easier to import datasets, create and write scripts, and makes using R
much more effective. RStudio is also free and open source. To function
correctly, RStudio needs R and therefore both need to be installed on
your computer.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="why-learn-r">Why learn R?<a class="anchor" aria-label="anchor" href="#why-learn-r"></a>
</h2>
<hr class="half-width">
<figure style="text-align: center"><img src="fig/r+rstudio-analogy.jpg" alt="Two images of a DMC Delorian: left is a standard model and on the right is one that has been modified into the time machine from 'Back To The Future'" class="figure mx-auto d-block"><figcaption>
RStudio extends what R can do, and makes it easier to write R code and
interact with R. <a href="https://commons.wikimedia.org/w/index.php?curid=2447462" class="external-link">Left
photo credit</a>; <a href="https://commons.wikimedia.org/w/index.php?curid=44599363" class="external-link">right
photo credit</a>.
</figcaption></figure><div class="section level4">
<h4 id="r-does-not-involve-lots-of-pointing-and-clicking-and-thats-a-good-thing-">
<strong>R does not involve lots of pointing and clicking, and that’s
a good thing.</strong><a class="anchor" aria-label="anchor" href="#r-does-not-involve-lots-of-pointing-and-clicking-and-thats-a-good-thing-"></a>
</h4>
<p>The learning curve might be steeper than with other software, but
with R, the results of your analysis do not rely on remembering a
succession of pointing and clicking, but instead on a series of written
commands, and that’s a good thing! So, if you want to redo your analysis
because you collected more data, you don’t have to remember which button
you clicked in which order to obtain your results; you just have to run
your script again.</p>
<p>Working with scripts makes the steps you used in your analysis clear,
and the code you write can be inspected by someone else who can give you
feedback and spot mistakes. It forces you to have a deeper understanding
of what you are doing, and facilitates your learning and comprehension
of the methods you use.</p>
</div>
<div class="section level4">
<h4 id="r-code-is-great-for-reproducibility-">
<strong>R code is great for reproducibility.</strong><a class="anchor" aria-label="anchor" href="#r-code-is-great-for-reproducibility-"></a>
</h4>
<p>Reproducibility is when someone else (including your future self) can
obtain the same results from the same dataset when using the same
analysis.</p>
<p>R integrates with other tools to generate manuscripts from your code.
If you collect more data, or fix a mistake in your dataset, the figures
and the statistical tests in your manuscript are updated
automatically.</p>
<p>An increasing number of journals and funding agencies expect analyses
to be reproducible, so knowing R will give you an edge with these
requirements.</p>
<p>This focus on reproducibility not only helps ensure that your data
adheres to the FAIR (Findable, Accessible, Interoperable, Reusable)
principles but is also paving the way for software to become FAIR. As
more researchers demand transparency and shareability, using R positions
your code and analyses to be easily found, accessed, and reused by
others.</p>
</div>
<div class="section level4">
<h4 id="r-is-interdisciplinary-and-extensible-">
<strong>R is interdisciplinary and extensible.</strong><a class="anchor" aria-label="anchor" href="#r-is-interdisciplinary-and-extensible-"></a>
</h4>
<p>With 10,000+ packages that can be installed to extend its
capabilities, R provides a framework that allows you to combine
statistical approaches from many scientific disciplines to best suit the
analytical framework you need to analyze your data. For instance, R has
packages for image analysis, GIS, time series, population genetics, and
a lot more.</p>
</div>
<div class="section level4">
<h4 id="r-works-on-data-of-all-shapes-and-sizes-">
<strong>R works on data of all shapes and sizes.</strong><a class="anchor" aria-label="anchor" href="#r-works-on-data-of-all-shapes-and-sizes-"></a>
</h4>
<p>The skills you learn with R scale easily with the size of your
dataset. Whether your dataset has hundreds or millions of lines, it
won’t make much difference to you.</p>
<p>R is designed for data analysis. It comes with special data
structures and data types that make handling of missing data and
statistical factors convenient.</p>
<p>R can connect to spreadsheets, databases, and many other data
formats, on your computer or on the web.</p>
</div>
<div class="section level4">
<h4 id="r-produces-high-quality-graphics-">
<strong>R produces high-quality graphics.</strong><a class="anchor" aria-label="anchor" href="#r-produces-high-quality-graphics-"></a>
</h4>
<p>The plotting functionalities in R are endless, and allow you to
adjust any aspect of your graph to convey most effectively the message
from your data.</p>
</div>
<div class="section level4">
<h4 id="r-has-a-large-and-welcoming-community-">
<strong>R has a large and welcoming community.</strong><a class="anchor" aria-label="anchor" href="#r-has-a-large-and-welcoming-community-"></a>
</h4>
<p>Thousands of people use R daily. Many of them are willing to help you
through mailing lists and websites such as <a href="https://stackoverflow.com/" class="external-link">Stack Overflow</a>, or on the <a href="https://community.rstudio.com/" class="external-link">RStudio community</a>. Questions
which are backed up with <a href="https://www.tidyverse.org/help/" class="external-link">short, reproducible code
snippets</a> are more likely to attract knowledgeable responses.</p>
</div>
<div class="section level4">
<h4 id="not-only-is-r-free-but-it-is-also-open-source-and-cross-platform-">
<strong>Not only is R free, but it is also open-source and
cross-platform.</strong><a class="anchor" aria-label="anchor" href="#not-only-is-r-free-but-it-is-also-open-source-and-cross-platform-"></a>
</h4>
<p>R is also free and open source, distributed under the terms of the <a href="https://www.gnu.org/licenses/gpl-3.0.en.html" class="external-link">GNU General Public
License.</a>. This means it is free to download and use the software for
any purpose, modify it, and share it. Anyone can inspect the source code
to see how R works. Because of this transparency, there is less chance
for mistakes, and if you (or someone else) find some, you can report and
fix bugs. As a result, R users have created thousands of packages and
software to enhance user experience and functionality.</p>
<p>Because R is open source and is supported by a large community of
developers and users, there is a very large selection of third-party
add-on packages which are freely available to extend R’s native
capabilities.</p>
<div id="discussion-r-for-librarianship" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="discussion-r-for-librarianship" class="callout-inner">
<h3 class="callout-title">Discussion: R for librarianship</h3>
<div class="callout-content">
<p>For at least the last decade, librarians have been grappling with the
ways that the “data deluge” affects our work on multiple
levels–collection development, analyzing usage of the library
website/space/collections, reference services, information literacy
instruction, research support, accessing bibliographic metadata from
third parties, and more.</p>
<p>Discuss some examples on how R or RStudio is useful for
librarians.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul>
<li>Clean messy data from the ILS &amp; vendors
<ul>
<li>Clean ISBNs, ISSNs, other identifiers</li>
<li>Detect data errors &amp; anomalies</li>
<li>Normalize names (e.g. databases, ebooks, serials)</li>
<li>Create custom subsets</li>
</ul>
</li>
<li>Merge and analyze data, e.g.
<ul>
<li>Holdings and usage data from the same vendor</li>
<li>Print book &amp; ebook holdings</li>
<li>COUNTER statistics</li>
<li>Institutional data</li>
</ul>
</li>
<li>Recode variables</li>
<li>Manipulate dates and times</li>
<li>Create visualizations</li>
<li>Provide data reference services</li>
<li>Access data via APIs, including Crossref, Unpaywall, ORCID, and
Sherpa-ROMeO</li>
<li>Write documents to communicate findings</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="about-rstudio">About RStudio<a class="anchor" aria-label="anchor" href="#about-rstudio"></a>
</h2>
<hr class="half-width">
<p>Let’s start by learning about <a href="https://www.rstudio.com/" class="external-link">RStudio</a>, which is an Integrated
Development Environment (IDE) for working with R.</p>
<p>The RStudio IDE open-source product is free under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html" class="external-link">Affero General
Public License (AGPL) v3</a>. The RStudio IDE is also available with a
commercial license and priority email support from RStudio, Inc.</p>
<p>We will use the RStudio IDE to write code, navigate the files on our
computer, inspect the variables we create, and visualize the plots we
generate. RStudio can also be used for other things (e.g., version
control, developing packages, writing Shiny apps) that we will not cover
during the workshop.</p>
<p>One of the advantages of using RStudio is that all the information
you need to write code is available in a single window. Additionally,
RStudio provides many shortcuts, autocompletion, and highlighting for
the major file types you use while developing in R. RStudio makes typing
easier and less error-prone.</p>
</section><section><h2 class="section-heading" id="the-rstudio-interface">The RStudio Interface<a class="anchor" aria-label="anchor" href="#the-rstudio-interface"></a>
</h2>
<hr class="half-width">
<p>Let’s take a quick tour of RStudio.</p>
<figure style="text-align: center"><img src="fig/RStudioPanes.png" alt="screenshot of RStudio with labels of the four panes as described below" class="figure mx-auto d-block"><figcaption>
R Studio
</figcaption></figure><p>RStudio is divided into four “panes”. The placement of these panes
and their content can be customized (see menu, Tools -&gt; Global
Options -&gt; Pane Layout).</p>
<p>The Default Layout is:</p>
<ul>
<li><p><strong>Script Pane</strong>: This is sort of like a text editor,
where you write and save a code. You can save the script as a .R file
for future use and sharing, or run the code to generate an
output.</p></li>
<li><p><strong>Console Pane</strong> If you were just using the basic R
interface, without RStudio, this is all you would see. The Console is
where your scripts are executed. To execute a code, you can either run
it from the Script Pane or type your code directly into the Console (you
will see a blinking cursor <code>&gt;</code> prompting you to enter some
code.</p></li>
<li><p><strong>Environment/History Pane</strong>: This will display the
objects that you’ve read into what is called the “global environment.”
When you read a file into R, or manually create an R object, it enters
into the computer’s working memory. The History tab displays all
commands that have been executed in the console.</p></li>
<li>
<p><strong>Navigation Pane</strong> This pane has multiple
functions:</p>
<ul>
<li>
<strong>Files:</strong> Navigate to files saved on your computer and
in your working directory</li>
<li>
<strong>Plots:</strong> View plots (e.g. charts and graphs) you have
created</li>
<li>
<strong>Packages:</strong> view add-on packages you have installed,
or install new packages</li>
<li>
<strong>Help:</strong> Read help pages for R functions</li>
<li>
<strong>Viewer:</strong> View local web content</li>
</ul>
</li>
</ul>
<div id="tip-saving-your-r-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-saving-your-r-code" class="callout-inner">
<h3 class="callout-title">Tip: Saving your R code</h3>
<div class="callout-content">
<p>To save your R codes and reuse them in the future, write and run your
code from the Script Pane and save them as a .R file. This ensures your
code is reproducible and that there is a complete record of what we did,
and anyone (including our future selves) can easily replicate the
results on their computer.</p>
<p>Alternatively, you can run temporary ‘test’ codes in the Console Pane
– these will not be saved but are available in the History Pane.</p>
<p>Use the shortcuts <kbd>Ctrl</kbd> + <kbd>1</kbd> and <kbd>Ctrl</kbd>
+ <kbd>2</kbd> to jump between the Script and Console Panes.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="create-a-new-project">Create a new project<a class="anchor" aria-label="anchor" href="#create-a-new-project"></a>
</h3>
<div id="rstudio-project" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="rstudio-project" class="callout-inner">
<h3 class="callout-title">RStudio project</h3>
<div class="callout-content">
<p>An <strong>RStudio project (.Rproj)</strong> allows you to save all
of the data, analyses, packages, etc. related to a specific analysis
project into a single <strong>working directory</strong>.</p>
<p>All of the scripts within this folder can then use <em>relative
paths</em> to files. Relative paths indicate where inside the project a
file is located (as opposed to <em>absolute paths</em>, which point to
where a file is on a specific computer).</p>
<p>Working this way makes it a lot easier to move your project around on
your computer and share it with others without having to directly modify
file paths in the individual scripts.</p>
</div>
</div>
</div>
<p>To create a new project, follow the instructions below.</p>
<ol style="list-style-type: decimal">
<li><p>Under the <kbd>File</kbd> menu, click on <kbd>New
project</kbd>.</p></li>
<li><p>Select <kbd>New directory</kbd>, then
<code>New project</code>.</p></li>
<li><p>Enter your new project name e.g. my_project. This will be your
<strong>working directory</strong> for the rest of the day.</p></li>
<li><p>Finally, click on <kbd>Create project</kbd>. Create a new file
where we will type our scripts. Go to
<code>File &gt; New File &gt; R</code> script. Click the save icon on
your toolbar and save your script as “<code>script.R</code>”.</p></li>
</ol>
</div>
</section><section><h2 class="section-heading" id="interacting-with-r">Interacting with R<a class="anchor" aria-label="anchor" href="#interacting-with-r"></a>
</h2>
<hr class="half-width">
<p>The basis of programming is that we write down instructions for the
computer to follow, and then we tell the computer to follow those
instructions. We write, or <em>code</em>, instructions in R because it
is a common language that both the computer and we can understand.</p>
<p>There are two main ways of interacting with R: by using the console
or by using script files (plain text files that contain your code). The
console pane (in RStudio, the bottom left panel) is the place where
commands written in the R language can be typed and executed immediately
by the computer. It is also where the results will be shown for commands
that have been executed. You can type commands directly into the console
and press <kbd>Enter</kbd> to execute those commands, but they will be
forgotten when you close the session.</p>
<div id="the-prompt" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-prompt" class="callout-inner">
<h3 class="callout-title">The prompt</h3>
<div class="callout-content">
<p>The <strong>prompt (<code>&gt;</code>)</strong> is the blinking
cursor in the console pane that prompts you to take action, in the
lower-left corner of R Studio. If R is ready to accept a
<strong>command</strong>, the R console shows a <code>&gt;</code>
prompt. If R receives a command (by typing, copy-pasting, or sent from
the script editor using <kbd>Ctrl</kbd> + <kbd>Enter</kbd>), R will try
to execute it and, when ready, will show the results and come back with
a new <code>&gt;</code> prompt to wait for new commands. We type
<em>commands</em> into the prompt, and press the Enter key to
<em>evaluate</em> (also called <em>execute</em> or <em>run</em>) those
commands.</p>
</div>
</div>
</div>
<p>You can use R like a calculator:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span> <span class="op">+</span> <span class="fl">2</span>    <span class="co"># Type 2 + 2 in the console to run the command</span></span></code></pre>
</div>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Tip: Moving your cursor</p>
<p>In the console, you can press the up and down keys on your keyboard
to cycle through previously executed commands.</p>
</div>
</div>
</div>
<p>Because we want our code and workflow to be reproducible, it is
better to type the commands we want in the script editor and save the
script. This way, there is a complete record of what we did, and anyone
(including our future selves!) can easily replicate the results on their
computer.</p>
<p>RStudio allows you to execute commands directly from the script
editor by using the <kbd>Ctrl</kbd> + <kbd>Enter</kbd> shortcut (on Mac,
<kbd>Cmd</kbd> + <kbd>Return</kbd> will work).</p>
<p>The command on the current line in the script (indicated by the
cursor) or all of the commands in selected text will be sent to the
console and executed when you press <kbd>Ctrl</kbd> + <kbd>Enter</kbd>.
If there is information in the console you do not need anymore, you can
clear it with <kbd>Ctrl</kbd> + <kbd>L</kbd>.</p>
<p>You can find other keyboard shortcuts in this <a href="https://github.com/rstudio/cheatsheets/raw/master/rstudio-ide.pdf" class="external-link">RStudio
cheatsheet about the RStudio IDE</a>.</p>
<div id="tip-incomplete-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-incomplete-commands" class="callout-inner">
<h3 class="callout-title">Tip: Incomplete commands</h3>
<div class="callout-content">
<p>If R recognises that a command is incomplete, a <code>+</code> prompt
will appear in the console. This means that R is still waiting for you
to enter more text.</p>
<p>Usually, this occurs because you have not ‘closed’ a parenthesis or
quotation. When this happens, click on the console and press
<kbd>Esc</kbd>; this will cancel the incomplete command and return you
to the <code>&gt;</code> prompt. You can then proofread the command(s)
you entered and correct the error.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="installing-r-packages">Installing R packages<a class="anchor" aria-label="anchor" href="#installing-r-packages"></a>
</h2>
<hr class="half-width">
<p>When you download R it already has a number of functions built in:
these encompass what is called <strong>Base R.</strong> However, many R
users write their own <strong>libraries</strong> of functions, package
them together in <strong>R Packages</strong>, and provide them to the R
community at no charge. Some examples include the <kbd>dplyr</kbd> and
<kbd>ggplot2</kbd> packages, which we will learn more in the coming
chapters.</p>
<div id="the-cran-repository" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-cran-repository" class="callout-inner">
<h3 class="callout-title">The CRAN repository</h3>
<div class="callout-content">
<p>The <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html" class="external-link">Comprehensive
R Archive Network (CRAN)</a> is the main repository for R packages, and
that organization maintains <a href="https://cran.r-project.org/web/packages/policies.html" class="external-link">strict
standards</a> in order for a package to be listed–for example, it must
include clear descriptions of the functions, and it must not track or
tamper with the user’s R session.</p>
<p>See <a href="https://support.rstudio.com/hc/en-us/articles/201057987-Quick-list-of-useful-R-packages" class="external-link">this
page from RStudio</a> for a good list of useful R packages. In addition
to CRAN, R users can make their code and packages available from <a href="https://github.com/trending/r" class="external-link">GitHub</a> or <a href="https://bioconductor.org/" class="external-link">Bioconductor</a> (for computational
biology and bioinformatics).</p>
</div>
</div>
</div>
<p><br></p>
<div class="section level3">
<h3 id="installing-packages-using-the-packages-tab">
<strong>Installing packages using the Packages tab</strong><a class="anchor" aria-label="anchor" href="#installing-packages-using-the-packages-tab"></a>
</h3>
<p>Installing CRAN packages can be done from the <kbd>Packages</kbd> tab
in the Navigation Pane. Click <code>Install</code> and type in the name
of the package you’re looking for.</p>
<figure style="text-align: center"><img src="fig/R_00_Rstudio_03.png" alt="install packages pane showing an entry for installing the 'tidyverse' package" class="figure mx-auto d-block"><figcaption>
Click on the Packages tab in the Navigation Pane to download packages
from CRAN.
</figcaption></figure><p>At the bottom of the Install Packages window is a check box to
‘Install’ dependencies. This is ticked by default, which is usually what
you want. Packages can (and do) make use of functionality built into
other packages, so for the functionality contained in the package you
are installing to work properly, there may be other packages which have
to be installed with them. The ‘Install dependencies’ option makes sure
that this happens.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Use the install option from the packages tab to install the
‘tidyverse’ package.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>From the packages tab, click ‘Install’ from the toolbar and type
‘tidyverse’ into the textbox, then click ‘install’. The ‘tidyverse’
package is really a package of packages, including ‘ggplot2’ and
‘dplyr’, both of which require other packages to run correctly. All of
these packages will be installed automatically.</p>
<p>Depending on what packages have previously been installed in your R
environment, the install of ‘tidyverse’ could be very quick or could
take several minutes. As the install proceeds, messages relating to its
progress will be written to the console. You will be able to see all of
the packages which are actually being installed.</p>
</div>
</div>
</div>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="installing-packages-using-r-code">
<strong>Installing packages using R code</strong><a class="anchor" aria-label="anchor" href="#installing-packages-using-r-code"></a>
</h3>
<p>If you were watching the console window when you started the install
of ‘tidyverse’, you may have noticed that the line</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">install.packages</span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code></pre>
</div>
<p>was written to the console before the start of the installation
messages.</p>
<p>You could also have installed the
<strong><code>tidyverse</code></strong> packages by running this command
directly in the R console. Run <code>help(install.packages)</code> to
learn more about how to do it this way.</p>
<p>Because the install process accesses the CRAN repository, you will
need an Internet connection to install packages.</p>
<p>It is also possible to install packages from other repositories, as
well as Github or the local file system, but we won’t be looking at
these options in this lesson.</p>
</div>
</section><section><h2 class="section-heading" id="r-resources">R Resources<a class="anchor" aria-label="anchor" href="#r-resources"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="learning-r">
<strong>Learning R</strong><a class="anchor" aria-label="anchor" href="#learning-r"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p><code>swirl</code> is a package you can install in R to learn
about R and data science interactively. Just type
<code>install.packages("swirl")</code> into your R console, load the
package by typing <code><a href="http://swirlstats.com" class="external-link">library("swirl")</a></code>, and then type
<code>swirl()</code>. Read more at <a href="https://swirlstats.com/" class="external-link">swirl</a>.</p></li>
<li><p><a href="https://tryr.codeschool.com/" class="external-link">Try R</a> is a
browser-based interactive tutorial developed by Code School.</p></li>
<li><p>Anthony Damico’s <a href="https://www.youtube.com/playlist?list=PLcgz5kNZFCkzSyBG3H-rUaPHoBXgijHfC" class="external-link">twotorials</a>
are a series of 2 minute videos demonstrating several basic tasks in
R.</p></li>
<li><p><a href="https://www.cookbook-r.com/" class="external-link">Cookbook for R</a> by
Winston Change provides solutions to common tasks and problems in
analyzing data.</p></li>
<li><p>If you’re up for a challenge, try the free <a href="https://www.coursera.org/learn/r-programming" class="external-link">R Programming MOOC
in Coursera</a> by Roger Peng.</p></li>
<li><p>Books:</p></li>
</ol>
<ul>
<li>
<a href="https://r4ds.had.co.nz/" class="external-link">R For Data Science</a> by Garrett
Grolemund &amp; Hadley Wickham [free]</li>
<li>
<a href="https://cran.r-project.org/doc/contrib/de_Jonge+van_der_Loo-Introduction_to_data_cleaning_with_R.pdf" class="external-link">An
Introduction to Data Cleaning with R</a> by Edwin de Jonge &amp; Mark
van der Loo [free]</li>
<li>
<a href="https://bookdown.org/ndphillips/YaRrr/" class="external-link">YaRrr! The Pirate’s
Guide to R</a> by Nathaniel D. Phillips [free]</li>
<li>Springer’s <a href="https://link.springer.com/bookseries/6991" class="external-link">Use
R!</a> series [not free] is mostly specialized, but it has some
excellent introductions including Alain F. Zuur et al.’s <a href="https://link.springer.com/book/10.1007/978-0-387-93837-0" class="external-link">A
Beginner’s Guide to R</a> and Phil Spector’s <a href="https://link.springer.com/book/10.1007/978-0-387-74731-6" class="external-link">Data
Manipulation in R</a>.</li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li>Other Carpentries R lesson:</li>
</ol>
<ul>
<li><a href="https://swcarpentry.github.io/r-novice-inflammation/" class="external-link">SWC –
Programming with R</a></li>
<li><a href="https://swcarpentry.github.io/r-novice-gapminder" class="external-link">SWC – R
for Reproducible Scientific Analysis</a></li>
<li><a href="https://carpentries-incubator.github.io/lc-litsearchr/" class="external-link">LC
- Introduction to R and litsearchr (pre-alpha)</a></li>
<li><a href="https://datacarpentry.org/R-ecology-lesson/" class="external-link">Data Analysis
and Visualization in R for Ecologists</a></li>
<li><a href="https://datacarpentry.org/genomics-r-intro/" class="external-link">Introduction
to R and RStudio for Genomics</a></li>
</ul>
<p><br></p>
</div>
<div class="section level3">
<h3 id="datasets">
<strong>Datasets</strong><a class="anchor" aria-label="anchor" href="#datasets"></a>
</h3>
<p>If you need some data to play with, type <code>data()</code> in the
console for a list of data sets. To load a dataset, type it like this:
<code>data(mtcars)</code>. Type <code>help(mtcars)</code> to learn more
about it. You can then perform operations, e.g.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="fu">nrow</span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span>
<span><span class="va">sixCylinder</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span> <span class="op">==</span> <span class="fl">6</span>, <span class="op">]</span></span></code></pre>
</div>
<p>See also rdatamining.com’s <a href="https://www.rdatamining.com/resources/free-datasets" class="external-link">list of free
datasets</a>.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="cheat-sheets">
<strong>Cheat Sheets</strong><a class="anchor" aria-label="anchor" href="#cheat-sheets"></a>
</h3>
<p>List of R Cheat Sheets:</p>
<ul>
<li>
<a href="https://paulvanderlaken.files.wordpress.com/2017/08/base-r-cheetsheat.pdf" class="external-link">Base
R Cheat Sheet</a> by Mhairi McNeill</li>
<li>
<a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf" class="external-link">Data
Transformation with dplyr Cheat Sheet</a> by RStudio</li>
<li>
<a href="https://paulvanderlaken.files.wordpress.com/2017/08/ddplyr-cheatsheet-data-wrangling-plyr.pdf" class="external-link">Data
Wrangling with dplyr and tidyr Cheat Sheet</a> by RStudio</li>
<li><a href="https://github.com/rstudio/cheatsheets/" class="external-link">Complete list of
RStudio cheatsheets</a></li>
</ul>
<p>You can find more cheat sheets in RStudio by going to the
<kbd>Help<kbd> panel then clicking on the <kbc>Cheat Sheets</kbc></kbd>
dropdown menu.</kbd></p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="style-guides">
<strong>Style guides</strong><a class="anchor" aria-label="anchor" href="#style-guides"></a>
</h3>
<p>Use these resources to write cleaner code, according to established
style conventions</p>
<ul>
<li>Hadley Wickham’s <a href="https://adv-r.had.co.nz/Style.html" class="external-link">Style
Guide</a>
</li>
<li>Google’s <a href="https://google.github.io/styleguide/Rguide.xml" class="external-link">R
Style Guide</a>
</li>
<li>Tip: highlight code in your script pane and press <strong>Ctrl/Cmd +
I</strong> on your keyboard to automatically fix the indents</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="credit">Credit<a class="anchor" aria-label="anchor" href="#credit"></a>
</h2>
<hr class="half-width">
<p>Parts of this episode have been inspired by the following:</p>
<ul>
<li>
<a href="https://datacarpentry.org/r-socialsci/00-intro/index.html" class="external-link">“Before
We Start”</a> R for Social Scientists Carpentry Lesson. CC BY 4.0.</li>
<li>Roger Peng’s <a href="https://www.youtube.com/playlist?list=PLjTlxb-wKvXNSDfcKPFH2gzHGyjpeCZmJ" class="external-link">Computing
for Data Analysis videos</a>
</li>
<li>Lisa Federer’s <a href="archived%20at%20%5Bhttps://web.archive.org/web/20180726071634/http://nihlibrary.campusguides.com/dataservices/intro_to_r%5D(https://web.archive.org/web/20180726071634/http://nihlibrary.campusguides.com/dataservices/intro_to_r)" class="external-link">Introduction
to R for Non-Programmers</a>
</li>
<li>Brad Boehmke’s <a href="https://uc-r.github.io/r_bootcamp" class="external-link">Intro to
R Bootcamp</a>
</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Navigate round RStudio and create an <code>Rproj</code> file.</li>
<li>Use RStudio to write and run R programs.</li>
<li>Install packages using the Packages tab or the
<code>install.packages()</code> command.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-01-intro-to-r"><p>Content from <a href="01-intro-to-r.html">Introduction to R</a></p>
<hr>
<p>Last updated on 2025-06-03 |

        <a href="https://github.com/librarycarpentry/lc-r/edit/main/episodes/01-intro-to-r.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is an object?</li>
<li>What is a function and how can we pass arguments to functions?</li>
<li>How can values be initially assigned to variables of different data
types?</li>
<li>What are the different data types in R?</li>
<li>How can a vector be created What are the available data types?</li>
<li>How can subsets be extracted from vectors?</li>
<li>How does R treat missing values?</li>
<li>How can we deal with missing values in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Assign values to objects in R.</li>
<li>Learn how to name objects.</li>
<li>Use comments to inform script.</li>
<li>Solve simple arithmetic operations in R.</li>
<li>Call functions and use arguments to change their default
options.</li>
<li>Where to get help with R functions and packages.</li>
<li>Recognise the different data types in R.</li>
<li>Create, inspect and manipulate the contents of a vector.</li>
<li>Subset and extract values from vectors.</li>
<li>Analyze vectors with missing data.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="creating-objects-in-r">Creating objects in R<a class="anchor" aria-label="anchor" href="#creating-objects-in-r"></a>
</h2>
<hr class="half-width">
<div id="objects-vs.-variables" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="objects-vs.-variables" class="callout-inner">
<h3 class="callout-title">Objects vs. variables</h3>
<div class="callout-content">
<p>What are known as <code>objects</code> in <code>R</code> are known as
<code>variables</code> in many other programming languages. Depending on
the context, <code>object</code> and <code>variable</code> can have
drastically different meanings. However, in this lesson, the two words
are used synonymously. For more information see: <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Objects" class="external-link">https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Objects</a></p>
</div>
</div>
</div>
<p>We will start by typing a simple mathematical operation in the
console:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">3</span> <span class="op">+</span> <span class="fl">5</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 8</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">7</span> <span class="op">*</span> <span class="fl">2</span>   <span class="co"># multiply 7 by 2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 14</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sqrt</span><span class="op">(</span><span class="fl">36</span><span class="op">)</span> <span class="co"># take the square root of 36</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 6</code></pre>
</div>
<p>However, to do useful and interesting things, we need to assign
<em>values</em> to <em>objects</em>.</p>
<p>To create an object, we need to provide: - a name
(e.g. ‘first_number’) - a value (e.g. ‘1’) - the assignment operator
(‘&lt;-’)</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_minutes</span> <span class="op">&lt;-</span> <span class="fl">5</span>        <span class="co"># assign the number 5 to the object time_minutes</span></span></code></pre>
</div>
<div id="the-assignment-operator--" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="the-assignment-operator--" class="callout-inner">
<h3 class="callout-title">The assignment operator
<code>&lt;-</code>
</h3>
<div class="callout-content">
<p><code>&lt;-</code> is the assignment operator. It assigns values on
the right to objects on the left. Here we are creating a symbol called
<code>time_minutes</code> and assigning it the numeric value 5. Some R
users would say “<code>time_minutes</code> <em>gets</em> 5.”
<code>time_minutes</code> is now a <em>numeric vector</em> with one
element.</p>
<p>The ‘=’ works too, but is most commonly used in passing arguments to
functions (more on functions later). There are shortcuts for the R
assignment operator: - Windows shortcut: <kbd>Alt</kbd>+<kbd>-</kbd> -
Mac shortcut: <kbd>Option</kbd>+<kbd>-</kbd></p>
</div>
</div>
</div>
<p>When you assign something to a symbol, nothing happens in the
console, but in the Environment pane in the upper right, you will notice
a new object, <code>time_minutes</code>.</p>
<div id="tips-on-naming-objects" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tips-on-naming-objects" class="callout-inner">
<h3 class="callout-title">Tips on naming objects</h3>
<div class="callout-content">
<p>Here are some tips for naming objects in R:</p>
<ul>
<li>
<strong>Do not use names of functions that already exist in
R:</strong> There are some names that cannot be used because they are
the names of fundamental functions in R (e.g., <code>if</code>,
<code>else</code>, <code>for</code>, see <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/Reserved.html" class="external-link">here</a>
for a complete list. In general, even if it’s allowed, it’s best to not
use other function names (e.g., <code>c</code>, <code>T</code>,
<code>mean</code>, <code>data</code>, <code>df</code>,
<code>weights</code>). If in doubt, check the help to see if the name is
already in use.</li>
<li>
<strong>R is case sensitive</strong>: <code>age</code> is different
from <code>Age</code> and <code>y</code> is different from
<code>Y</code>.</li>
<li>
<strong>No blank spaces or symbols other than underscores</strong>:
R users get around this in a couple of ways, either through
capitalization (e.g. <code>myData</code>) or underscores
(e.g. <code>my_data</code>). It’s also best to avoid dots
(<code>.</code>) within an object name as in <code>my.dataset</code>.
There are many functions in R with dots in their names for historical
reasons, but dots have a special meaning in R (for methods) and other
programming languages.</li>
<li>
<strong>Do not begin with numbers or symbols</strong>:
<code>2x</code> is not valid, but <code>x2</code> is.</li>
<li>
<strong>Be descriptive, but make your variable names short</strong>:
It’s good practice to be descriptive with your variable names. If you’re
loading in a lot of data, choosing <code>myData</code> or <code>x</code>
as a name may not be as helpful as, say, <code>ebookUsage</code>.
Finally, keep your variable names short, since you will likely be typing
them in frequently.</li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="evaluating-expressions">Evaluating Expressions<a class="anchor" aria-label="anchor" href="#evaluating-expressions"></a>
</h2>
<hr class="half-width">
<p>If you now type <code>time_minutes</code> into the console, and press
Enter on your keyboard, R will <em>evaluate</em> the expression. In this
case, R will <em>print</em> the elements that are assigned to
<code>time_minutes</code> (the number 5). We can do this easily since y
only has one element, but if you do this with a large dataset loaded
into R, it will overload your console because it will print the entire
thing. The <code>[1]</code> indicates that the number 5 is the first
element of this vector.</p>
<p>When assigning a value to an object, R does not print anything to the
console. You can force R to print the value by using parentheses or by
typing the object name:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_minutes</span> <span class="op">&lt;-</span> <span class="fl">5</span>    <span class="co"># doesn't print anything</span></span>
<span><span class="op">(</span><span class="va">time_minutes</span> <span class="op">&lt;-</span> <span class="fl">5</span><span class="op">)</span>  <span class="co"># putting parenthesis around the call prints the value of y</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_minutes</span>         <span class="co"># so does typing the name of the object</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">print</span><span class="op">(</span><span class="va">time_minutes</span><span class="op">)</span>  <span class="co"># so does using the print() function.</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5</code></pre>
</div>
<p>Now that R has <code>time_minutes</code> in memory, we can do
arithmetic with it. For instance, we may want to convert it into seconds
(60 seconds in 1 minute):</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">60</span> <span class="op">*</span> <span class="va">time_minutes</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 300</code></pre>
</div>
<p>We can also change an object’s value by assigning it a new one:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_minutes</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="fl">60</span> <span class="op">*</span> <span class="va">time_minutes</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 600</code></pre>
</div>
<p>This overwrites the previous value without prompting you, so be
careful! Also, assigning a value to one object does not change the
values of other objects For example, let’s store the time in seconds in
a new object, <code>time_seconds</code>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_seconds</span> <span class="op">&lt;-</span> <span class="fl">60</span> <span class="op">*</span> <span class="va">time_minutes</span></span></code></pre>
</div>
<p>Then change <code>time_minutes</code> to 30:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_minutes</span> <span class="op">&lt;-</span> <span class="fl">30</span></span></code></pre>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>What do you think is the current content of the object
<code>time_seconds</code>? 600 or 1800?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The value of <code>time_seconds</code> is still 600 because you have
not re-run the line <code>time_seconds &lt;- 60 * time_minutes</code>
since changing the value of <code>time_minutes</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="removing-objects-from-the-environment">Removing objects from the environment<a class="anchor" aria-label="anchor" href="#removing-objects-from-the-environment"></a>
</h2>
<hr class="half-width">
<p>To remove an object from your R environment, use the
<code>rm()</code> function. Remove multiple objects with
<code>rm(list = c("add", "objects", "here))</code>, adding the objects
in <code>c()</code> using quotation marks.</p>
<p>To remove all objects, use <code>rm(list = ls())</code> or click the
broom icon in the Environment Pane, next to “Import Dataset.”</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fl">15</span></span>
<span><span class="fu">rm</span><span class="op">(</span><span class="va">x</span><span class="op">)</span>  <span class="co"># remove x</span></span>
<span><span class="fu">rm</span><span class="op">(</span>list <span class="op">=</span><span class="fu">c</span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">)</span>  <span class="co"># remove y and z</span></span>
<span><span class="fu">rm</span><span class="op">(</span>list <span class="op">=</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="co"># remove all objects</span></span></code></pre>
</div>
<div id="tip-use-whitespace-for-readability" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-use-whitespace-for-readability" class="callout-inner">
<h3 class="callout-title">Tip: Use whitespace for readability</h3>
<div class="callout-content">
<p>The white spaces surrounding the assignment operator
<code>&lt;-</code> are unnecessary. However, including them does make
your code easier to read. There are several style guides you can follow,
and choosing one is up to you, but consistency is key!</p>
<p>A style guide we recommend is the <a href="https://style.tidyverse.org/" class="external-link">Tidyverse style guide</a>.</p>
</div>
</div>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Create two variables <code>my_length</code> and <code>my_width</code>
and assign them any numeric values you want. Create a third variable
<code>my_area</code> and give it a value based on the the multiplication
of <code>my_length</code> and <code>my_width</code>. Show that changing
the values of either <code>my_length</code> and <code>my_width</code>
does not affect the value of <code>my_area</code>.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_length</span> <span class="op">&lt;-</span> <span class="fl">2.5</span></span>
<span><span class="va">my_width</span> <span class="op">&lt;-</span> <span class="fl">3.2</span></span>
<span><span class="va">my_area</span> <span class="op">&lt;-</span> <span class="va">my_length</span> <span class="op">*</span> <span class="va">my_width</span></span>
<span><span class="va">area</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error: object 'area' not found</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># change the values of my_length and my_width</span></span>
<span><span class="va">my_length</span> <span class="op">&lt;-</span> <span class="fl">7.0</span></span>
<span><span class="va">my_width</span> <span class="op">&lt;-</span> <span class="fl">6.5</span></span>
<span><span class="co"># the value of my_area isn't changed</span></span>
<span><span class="va">my_area</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 8</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="comments">Comments<a class="anchor" aria-label="anchor" href="#comments"></a>
</h2>
<hr class="half-width">
<p>All programming languages allow the programmer to include comments in
their code. To do this in R we use the <code>#</code> character.
Anything to the right of the <code>#</code> sign and up to the end of
the line is treated as a comment and will not be evaluated by R. You can
start lines with comments or include them after any code on the
line.</p>
<p>Comments are essential to helping you remember what your code does,
and explaining it to others. Commenting code, along with documenting how
data is collected and explaining what each variable represents, is
essential to reproducible research. See the Software Carpentry lesson on
<a href="https://swcarpentry.github.io/r-novice-gapminder/" class="external-link">R for
Reproducible Scientific Analysis</a>.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_minutes</span> <span class="op">&lt;-</span> <span class="fl">5</span>    <span class="co"># time in minutes</span></span>
<span><span class="va">time_seconds</span> <span class="op">&lt;-</span> <span class="fl">60</span> <span class="op">*</span> <span class="va">time_minutes</span>  <span class="co"># convert to seconds</span></span>
<span><span class="va">time_seconds</span>        <span class="co"># print time in seconds</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 300</code></pre>
</div>
<p>RStudio makes it easy to comment or uncomment a paragraph: after
selecting the lines you want to comment, press at the same time on your
keyboard <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd>. If you only
want to comment out one line, you can put the cursor at any location of
that line (i.e. no need to select the whole line), then press
<kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd>.</p>
</section><section><h2 class="section-heading" id="functions-and-their-arguments">Functions and their arguments<a class="anchor" aria-label="anchor" href="#functions-and-their-arguments"></a>
</h2>
<hr class="half-width">
<p>R is a “functional programming language,” meaning it contains a
number of <em>functions</em> you use to do something with your data.
Functions are “canned scripts” that automate more complicated sets of
commands. Many functions are predefined, or can be made available by
importing R <em>packages</em> as we saw in the “Before We Start”
lesson.</p>
<p><em>Call</em> a function on a variable by entering the function into
the console, followed by parentheses and the variables. A function
usually gets one or more inputs called <em>arguments</em>. For example,
if you want to take the sum of 3 and 4, you can type in
<code>sum(3, 4)</code>. In this case, the arguments must be a number,
and the return value (the output) is the sum of those numbers. An
example of a function call is:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sum</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span></span></code></pre>
</div>
<p>The function <code>is.function()</code> will check if an argument is
a function in R. If it is a function, it will print <code>TRUE</code> to
the console.</p>
<p>Functions can be nested within each other. For example,
<code>sqrt()</code> takes the square root of the number provided in the
function call. Therefore you can run <code>sum(sqrt(9), 4)</code> to
take the sum of the square root of 9 and add it to 4.</p>
<p>Typing a question mark before a function will pull the help page up
in the Navigation Pane in the lower right. Type <code>?sum</code> to
view the help page for the <code>sum</code> function. You can also call
<code>help(sum)</code>. This will provide the description of the
function, how it is to be used, and the arguments.</p>
<p>In the case of <code>sum()</code>, the ellipses <code>. . .</code>
represent an unlimited number of numeric elements.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">is.function</span><span class="op">(</span><span class="va">sum</span><span class="op">)</span>        <span class="co"># check to see if sum() is a function</span></span>
<span><span class="fu">sum</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>      <span class="co"># sum takes an unlimited number (. . .) of numeric elements</span></span></code></pre>
</div>
<p><br></p>
<div class="section level3">
<h3 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a>
</h3>
<p>Some functions take arguments which may either be specified by the
user, or, if left out, take on a <em>default</em> value. However, if you
want something specific, you can specify a value of your choice which
will be used instead of the default. This is called <em>passing</em> an
argument to the function.</p>
<p>For example, <code>sum()</code> takes the argument option
<code>na.rm</code>. If you check the help page for sum (call
<code>?sum</code>), you can see that <code>na.rm</code> requires a
logical (<code>TRUE/FALSE</code>) value specifying whether
<code>NA</code> values (missing data) should be removed when the
argument is evaluated.</p>
<p>By default, <code>na.rm</code> is set to <code>FALSE</code>, so
evaluating a sum with missing values will return <code>NA</code>:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sum</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="cn">NA</span><span class="op">)</span>                <span class="co"># </span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<p>Even though we do not see the argument here, it is operating in the
background, as the <code>NA</code> value remains. 3 + 4 +
<code>NA</code> is <code>NA</code>.</p>
<p>But setting the argument <code>na.rm</code> to <code>TRUE</code> will
remove the <code>NA</code>:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sum</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="cn">NA</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 7</code></pre>
</div>
<p>It is very important to understand the different arguments that
functions take, the values that can be added to those functions, and the
default arguments. Arguments can be anything, not only <code>TRUE</code>
or <code>FALSE</code>, but also other objects. Exactly what each
argument means differs per function, and must be looked up in the
documentation.</p>
<p>It’s good practice to put the non-optional arguments first in your
function call, and to specify the names of all optional arguments. If
you don’t, someone reading your code might have to look up the
definition of a function with unfamiliar arguments to understand what
you’re doing.</p>
</div>
</section><section><h2 class="section-heading" id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<hr class="half-width">
<p>You can check the current version of R by running:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sessionInfo</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>R version 4.5.0 (2025-04-11)
Platform: x86_64-pc-linux-gnu
Running under: Ubuntu 22.04.5 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0
LAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0  LAPACK version 3.10.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8
 [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8
 [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C
[10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C

time zone: UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_4.5.0 tools_4.5.0    yaml_2.3.10    knitr_1.50     xfun_0.52
[6] renv_1.1.4     evaluate_1.0.3</code></pre>
</div>
<pre><code>R version 3.2.3 (2015-12-10)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 14.04.3 LTS

locale:
[1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8
[4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
[7] LC_PAPER=en_US.UTF-8       LC_NAME=C                  LC_ADDRESS=C
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.2.3     packrat_0.4.9-1</code></pre>
<p><br></p>
<div class="section level3">
<h3 id="using-the-for-help-files">
<strong>Using the ? for Help files</strong><a class="anchor" aria-label="anchor" href="#using-the-for-help-files"></a>
</h3>
<p>R provide help files for functions. The general syntax to search for
help on any function is the ? or help() command:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">function_name</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No documentation for 'function_name' in specified packages and libraries:
you could try '??function_name'</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">help</span><span class="op">(</span><span class="va">function_name</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No documentation for 'function_name' in specified packages and libraries:
you could try '??function_name'</code></pre>
</div>
<p>For example, take a look at the ?summary() function.</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>This will load up a Help page on the bottom right panel in
RStudio.</p>
<p>Each help page is broken down into sections:</p>
<ul>
<li>
<strong>Description</strong>: An extended description of what the
function does.</li>
<li>
<strong>Usage</strong>: The arguments of the function and their
default values (which can be changed).</li>
<li>
<strong>Arguments</strong>: An explanation of the data each argument
is expecting.</li>
<li>
<strong>Details</strong>: Any important details to be aware of.</li>
<li>
<strong>Value</strong>: The data the function returns.</li>
<li>
<strong>See Also</strong>: Any related functions you might find
useful.</li>
<li>
<strong>Examples</strong>: Some examples for how to use the
function.</li>
</ul>
<p>You can also call out the Help file for
<code>special operators</code>.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="st">"&lt;-"</span></span>
<span><span class="op">?</span><span class="va">`&lt;-`</span></span></code></pre>
</div>
<div id="tip-use-tab-to-see-a-list-of-arguments" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-use-tab-to-see-a-list-of-arguments" class="callout-inner">
<h3 class="callout-title">Tip: Use TAB to see a list of arguments</h3>
<div class="callout-content">
<p>After typing out a function, you can call out a list of available
arguments for that particular function by pressing the <kbd>TAB<kbd> key
within the function brackets.</kbd></kbd></p>
</div>
</div>
</div>
<div id="tip-package-vignettes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-package-vignettes" class="callout-inner">
<h3 class="callout-title">Tip: Package vignettes</h3>
<div class="callout-content">
<p>Many packages come with “vignettes”–these are tutorials and extended
documentation. Without any arguments, vignette() will list all vignettes
for all installed packages; vignette(package=“package-name”) will list
all available vignettes for package-name, and vignette(“vignette-name”)
will open the specified vignette.</p>
</div>
</div>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="using-the-for-a-fuzzy-search">
<strong>Using the ?? for a fuzzy search</strong><a class="anchor" aria-label="anchor" href="#using-the-for-a-fuzzy-search"></a>
</h3>
<p>If you’re not sure what package a function is in or how it’s
specifically spelled, you can do a fuzzy search.</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="op">?</span><span class="va">function_name</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No vignettes or demos or help files found with alias or concept or
title matching 'function_name' using regular expression matching.</code></pre>
</div>
<p>A fuzzy search is when you search for an approximate string match.
For example, you may want to look for a function that performs the
chi-squared test:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="op">?</span><span class="va">chisquare</span></span></code></pre>
</div>
<div id="discussion" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="discussion" class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>Type in <code>?round</code> at the console and then look at the
output in the Help pane. What other functions exist that are similar to
<code>round</code>? How do you use the <code>digits</code> parameter in
the round function?</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="vectors-and-data-types">Vectors and data types<a class="anchor" aria-label="anchor" href="#vectors-and-data-types"></a>
</h2>
<hr class="half-width">
<p>A vector is the most common and basic data type in R, and is pretty
much the workhorse of R. A vector is a sequence of elements of the same
<em>type</em>. Vectors can only contain “homogenous” data–in other
words, all data must be of the same type. The type of a vector
determines what kind of analysis you can do on it. For example, you can
perform mathematical operations on <code>numeric</code> objects, but not
on <code>character</code> objects.</p>
<p>We can assign a series of values to a vector using the
<code>c()</code> function. <code>c()</code> stands for combine. If you
read the help files for <code>c()</code> by calling
<code>help(c)</code>, you can see that it takes an unlimited
<code>. . .</code> number of arguments.</p>
<p>For example we can create a vector of checkouts for a collection of
books and assign it to a new object <code>checkouts</code>:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">checkouts</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">25</span>, <span class="fl">15</span>, <span class="fl">18</span><span class="op">)</span></span>
<span><span class="va">checkouts</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 25 15 18</code></pre>
</div>
<p>A vector can also contain characters. For example, we can have a
vector of the book titles (<code>title</code>) and authors
(<code>author</code>):</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">title</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Macbeth"</span>,<span class="st">"Dracula"</span>,<span class="st">"1984"</span><span class="op">)</span></span></code></pre>
</div>
<div id="tip-using-quotes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip-using-quotes" class="callout-inner">
<h3 class="callout-title">Tip: Using quotes</h3>
<div class="callout-content">
<p>The quotes around “Macbeth”, etc. are essential here. Without the
quotes R will assume there are objects called <code>Macbeth</code> and
<code>Dracula</code> in the environment. As these objects don’t yet
exist in R’s memory, there will be an error message.</p>
</div>
</div>
</div>
<p><br></p>
<div class="section level3">
<h3 id="inspecting-a-vector">
<strong>Inspecting a vector</strong><a class="anchor" aria-label="anchor" href="#inspecting-a-vector"></a>
</h3>
<p>There are many functions that allow you to inspect the content of a
vector.</p>
<p>For instance, <code>length()</code> tells you how many elements are
in a particular vector:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">length</span><span class="op">(</span><span class="va">checkouts</span><span class="op">)</span>  <span class="co"># print the number of values in the checkouts vector</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 3</code></pre>
</div>
<p>An important feature of a vector, is that all of the elements are the
same type of data. The function <code>class()</code> indicates the class
(the type of element) of an object:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">checkouts</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "numeric"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">title</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>Type <code>?str</code> into the console to read the description of
the <code>str</code> function. You can call <code>str()</code> on an R
object to compactly display information about it, including the data
type, the number of elements, and a printout of the first few
elements.</p>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">checkouts</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> num [1:3] 25 15 18</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">str</span><span class="op">(</span><span class="va">title</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> chr [1:3] "Macbeth" "Dracula" "1984"</code></pre>
</div>
<p>You can use the <code>c()</code> function to add other elements to
your vector:</p>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">author</span> <span class="op">&lt;-</span> <span class="st">"Stoker"</span></span>
<span><span class="va">author</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">author</span>, <span class="st">"Orwell"</span><span class="op">)</span> <span class="co"># add to the end of the vector</span></span>
<span><span class="va">author</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Shakespeare"</span>, <span class="va">author</span><span class="op">)</span></span>
<span><span class="va">author</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Shakespeare" "Stoker"      "Orwell"     </code></pre>
</div>
<div id="reminder" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="reminder" class="callout-inner">
<h3 class="callout-title">Reminder</h3>
<div class="callout-content">
<p>To know what a function does, type <code>?function_name</code> into
the console. For example, you can type <code>?str</code> to read the
description for the <code>str()</code> function.</p>
</div>
</div>
</div>
<p>In the first line, we create a character vector <code>author</code>
with a single value <code>"Stoker"</code>. In the second line, we add
the value <code>"Orwell"</code> to it, and save the result back into
<code>author</code>. Then we add the value <code>"Shakespeare"</code> to
the beginning, again saving the result back into
<code>author</code>.</p>
<p>We can do this over and over again to grow a vector, or assemble a
dataset. As we program, this may be useful to add results that we are
collecting or calculating.</p>
<p>Vectors are one of the many <strong>data structures</strong> that R
uses. Other important ones are lists (<code>list</code>), matrices
(<code>matrix</code>), data frames (<code>data.frame</code>), factors
(<code>factor</code>) and arrays (<code>array</code>).</p>
<div id="atomic-vectors" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="atomic-vectors" class="callout-inner">
<h3 class="callout-title">Atomic vectors</h3>
<div class="callout-content">
<p>An <strong>atomic vector</strong> is the simplest R <strong>data
type</strong> and is a linear vector of a single type. Above, we saw 2
of the 6 main <strong>atomic vector</strong> types that R uses:
<code>"character"</code> and <code>"numeric"</code> (or
<code>"double"</code>). These are the basic building blocks that all R
objects are built from. The other 4 <strong>atomic vector</strong> types
are:</p>
<ul>
<li>
<code>"logical"</code> for <code>TRUE</code> and <code>FALSE</code>
(the boolean data type)</li>
<li>
<code>"integer"</code> for integer numbers (e.g., <code>2L</code>,
the <code>L</code> indicates to R that it’s an integer)</li>
<li>
<code>"complex"</code> to represent complex numbers with real and
imaginary parts (e.g., <code>1 + 4i</code>) and that’s all we’re going
to say about them</li>
<li>
<code>"raw"</code> for bitstreams that we won’t discuss further</li>
</ul>
<p>You can check the type of your vector using the <code>typeof()</code>
function and inputting your vector as the argument.</p>
</div>
</div>
</div>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>We’ve seen that atomic vectors can be of type character, numeric (or
double), integer, and logical. But what happens if we try to mix these
types in a single vector?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>R implicitly converts them to all be the same type.</p>
</div>
</div>
</div>
</div>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>What will happen in each of these examples? (hint: use
<code>typeof()</code> to check the data type of your objects):</p>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_char</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="va">num_logical</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">char_logical</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">tricky</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="st">"4"</span><span class="op">)</span></span></code></pre>
</div>
<p>Why do you think it happens?</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Vectors can be of only one data type. R tries to convert (coerce) the
content of this vector to find a “common denominator” that doesn’t lose
any information.</p>
</div>
</div>
</div>
</div>
<div id="exercise-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-2" class="callout-inner">
<h3 class="callout-title">Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>How many values in <code>combined_logical</code> are
<code>"TRUE"</code> (as a character) in the following example:</p>
<div class="codewrapper sourceCode" id="cb61">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_logical</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">char_logical</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">combined_logical</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="va">num_logical</span>, <span class="va">char_logical</span><span class="op">)</span></span></code></pre>
</div>
<p> </p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Only one. There is no memory of past data types, and the coercion
happens the first time the vector is evaluated. Therefore, the
<code>TRUE</code> in <code>num_logical</code> gets converted into a
<code>1</code> before it gets converted into <code>"1"</code> in
<code>combined_logical</code>.</p>
</div>
</div>
</div>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="coercion">
<strong>Coercion</strong><a class="anchor" aria-label="anchor" href="#coercion"></a>
</h3>
<p>You’ve probably noticed that objects of different types get converted
into a single, shared type within a vector. In R, we call converting
objects from one class into another class <em>coercion</em>. These
conversions happen according to a hierarchy, whereby some types get
preferentially coerced into other types. This hierarchy is: logical &lt;
integer &lt; numeric &lt; complex &lt; character &lt; list.</p>
<p>You can also <em>coerce</em> a vector to be a specific data type with
<code>as.character()</code>, <code>as.logical()</code>,
<code>as.numeric()</code>, etc. For example, to coerce a number to a
character:</p>
<div class="codewrapper sourceCode" id="cb62">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">as.character</span><span class="op">(</span><span class="fl">200</span><span class="op">)</span></span></code></pre>
</div>
<p>We can test this in a few ways: if we print <code>x</code> to the
console, we see quotation marks around it, letting us know it is a
character:</p>
<div class="codewrapper sourceCode" id="cb63">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "200"</code></pre>
</div>
<p>We can also call <code>class()</code></p>
<div class="codewrapper sourceCode" id="cb65">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "character"</code></pre>
</div>
<p>And if we try to add a number to <code>x</code>, we will get an error
message <code>non-numeric argument to binary operator</code>--in other
words, x is <code>non-numeric</code> and cannot be added to a
number.</p>
<div class="codewrapper sourceCode" id="cb67">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">+</span> <span class="fl">5</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="subsetting-vectors">Subsetting vectors<a class="anchor" aria-label="anchor" href="#subsetting-vectors"></a>
</h2>
<hr class="half-width">
<p>If we want to subset (or extract) one or several values from a
vector, we must provide one or several indices in square brackets. For
this example, we will use the <code>state</code> data, which is built
into R and includes data related to the 50 states of the U.S.A. Type
<code>?state</code> to see the included datasets.
<code>state.name</code> is a built in vector in R of all U.S.
states:</p>
<div class="codewrapper sourceCode" id="cb68">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "Alabama"        "Alaska"         "Arizona"        "Arkansas"
 [5] "California"     "Colorado"       "Connecticut"    "Delaware"
 [9] "Florida"        "Georgia"        "Hawaii"         "Idaho"
[13] "Illinois"       "Indiana"        "Iowa"           "Kansas"
[17] "Kentucky"       "Louisiana"      "Maine"          "Maryland"
[21] "Massachusetts"  "Michigan"       "Minnesota"      "Mississippi"
[25] "Missouri"       "Montana"        "Nebraska"       "Nevada"
[29] "New Hampshire"  "New Jersey"     "New Mexico"     "New York"
[33] "North Carolina" "North Dakota"   "Ohio"           "Oklahoma"
[37] "Oregon"         "Pennsylvania"   "Rhode Island"   "South Carolina"
[41] "South Dakota"   "Tennessee"      "Texas"          "Utah"
[45] "Vermont"        "Virginia"       "Washington"     "West Virginia"
[49] "Wisconsin"      "Wyoming"       </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb70">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Alabama"</code></pre>
</div>
<p>You can use the <code>:</code> colon to create a vector of
consecutive numbers.</p>
<div class="codewrapper sourceCode" id="cb72">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Alabama"    "Alaska"     "Arizona"    "Arkansas"   "California"</code></pre>
</div>
<p>If the numbers are not consecutive, you must use the <code>c()</code>
function:</p>
<div class="codewrapper sourceCode" id="cb74">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Alabama"  "Georgia"  "Maryland"</code></pre>
</div>
<p>We can also repeat the indices to create an object with more elements
than the original one:</p>
<div class="codewrapper sourceCode" id="cb76">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Alabama" "Alaska"  "Arizona" "Alaska"  "Alabama" "Arizona"</code></pre>
</div>
<p>R indices start at 1. Programming languages like Fortran, MATLAB,
Julia, and R start counting at 1, because that’s what human beings
typically do. Languages in the C family (including C++, Java, Perl, and
Python) count from 0 because that’s simpler for computers to do.</p>
<p><br></p>
<div class="section level3">
<h3 id="conditional-subsetting">
<strong>Conditional subsetting</strong><a class="anchor" aria-label="anchor" href="#conditional-subsetting"></a>
</h3>
<p>Another common way of subsetting is by using a logical vector.
<code>TRUE</code> will select the element with the same index, while
<code>FALSE</code> will not:</p>
<div class="codewrapper sourceCode" id="cb78">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">five_states</span> <span class="op">&lt;-</span> <span class="va">state.name</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="va">five_states</span><span class="op">[</span><span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Alabama"    "Arizona"    "California"</code></pre>
</div>
<p>Typically, these logical vectors are not typed by hand, but are the
output of other functions or logical tests. <code>state.area</code> is a
vector of state areas in square miles. We can use the <code>&lt;</code>
operator to return a logical vector with TRUE for the indices that meet
the condition:</p>
<div class="codewrapper sourceCode" id="cb80">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.area</span> <span class="op">&lt;</span> <span class="fl">10000</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
[37] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
[49] FALSE FALSE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb82">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.area</span><span class="op">[</span><span class="va">state.area</span> <span class="op">&lt;</span> <span class="fl">10000</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 5009 2057 6450 8257 9304 7836 1214 9609</code></pre>
</div>
<p>The first expression gives us a logical vector of length 50, where
<code>TRUE</code> represents those states with areas less than 10,000
square miles. The second expression subsets <code>state.name</code> to
include only those names where the value is <code>TRUE</code>.</p>
<p>You can also specify character values. <code>state.region</code>
gives the region that each state belongs to:</p>
<div class="codewrapper sourceCode" id="cb84">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.region</span> <span class="op">==</span> <span class="st">"Northeast"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE
[37] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE
[49] FALSE FALSE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb86">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="va">state.region</span> <span class="op">==</span> <span class="st">"Northeast"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Connecticut"   "Maine"         "Massachusetts" "New Hampshire"
[5] "New Jersey"    "New York"      "Pennsylvania"  "Rhode Island"
[9] "Vermont"      </code></pre>
</div>
<p>Again, a <code>TRUE/FALSE</code> index of all 50 states where the
region is the Northeast, followed by a subset of <code>state.name</code>
to return only those <code>TRUE</code> values.</p>
<p>Sometimes you need to do multiple logical tests (think Boolean
logic). You can combine multiple tests using <code>|</code> (at least
one of the conditions is true, OR) or <code>&amp;</code> (both
conditions are true, AND). Use <code>help(Logic)</code> to read the help
file.</p>
<div class="codewrapper sourceCode" id="cb88">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="va">state.area</span> <span class="op">&lt;</span> <span class="fl">10000</span> <span class="op">|</span> <span class="va">state.region</span> <span class="op">==</span> <span class="st">"Northeast"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "Connecticut"   "Delaware"      "Hawaii"        "Maine"
 [5] "Massachusetts" "New Hampshire" "New Jersey"    "New York"
 [9] "Pennsylvania"  "Rhode Island"  "Vermont"      </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb90">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="va">state.area</span> <span class="op">&lt;</span> <span class="fl">10000</span> <span class="op">&amp;</span> <span class="va">state.region</span> <span class="op">==</span> <span class="st">"Northeast"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Connecticut"   "Massachusetts" "New Hampshire" "New Jersey"
[5] "Rhode Island"  "Vermont"      </code></pre>
</div>
<p>The first result includes both states with fewer than 10,000 sq. mi.
and all states in the Northeast. New York, Pennsylvania, Delaware and
Maine have areas with greater than 10,000 square miles, but are in the
Northeastern U.S. Hawaii is not in the Northeast, but it has fewer than
10,000 square miles. The second result includes only states that are in
the Northeast and have fewer than 10,000 sq. mi.</p>
<p>R contains a number of operators you can use to compare values. Use
<code>help(Comparison)</code> to read the R help file. Note that
<strong>two equal signs</strong> (<code>==</code>) are used for
evaluating equality (because one equals sign (<code>=</code>) is used
for assigning variables).</p>
<p>A common task is to search for certain strings in a vector. One could
use the “or” operator <code>|</code> to test for equality to multiple
values, but this can quickly become tedious. The function
<code>%in%</code> allows you to test if any of the elements of a search
vector are found:</p>
<div class="codewrapper sourceCode" id="cb92">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">west_coast</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="st">"California"</span>, <span class="st">"Oregon"</span>, <span class="st">"Washington"</span><span class="op">)</span></span>
<span><span class="va">state.name</span><span class="op">[</span><span class="va">state.name</span> <span class="op">==</span> <span class="st">"California"</span> <span class="op">|</span> <span class="va">state.name</span> <span class="op">==</span> <span class="st">"Oregon"</span> <span class="op">|</span> <span class="va">state.name</span> <span class="op">==</span> <span class="st">"Washington"</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "California" "Oregon"     "Washington"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb94">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span> <span class="op">%in%</span> <span class="va">west_coast</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[37]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
[49] FALSE FALSE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb96">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">state.name</span><span class="op">[</span><span class="va">state.name</span> <span class="op">%in%</span> <span class="va">west_coast</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "California" "Oregon"     "Washington"</code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="missing-data">Missing data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h2>
<hr class="half-width">
<p>As R was designed to analyze datasets, it includes the concept of
missing data (which is uncommon in other programming languages). Missing
data are represented in vectors as <code>NA</code>. R functions have
special actions when they encounter <code>NA.</code></p>
<p>When doing operations on numbers, most functions will return
<code>NA</code> if the data you are working with include missing values.
This feature makes it harder to overlook the cases where you are dealing
with missing data. As we saw above, you can add the argument
<code>na.rm=TRUE</code> to calculate the result while ignoring the
missing values.</p>
<div class="codewrapper sourceCode" id="cb98">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rooms</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb100">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">max</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] NA</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb102">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">mean</span><span class="op">(</span><span class="va">rooms</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb104">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">max</span><span class="op">(</span><span class="va">rooms</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4</code></pre>
</div>
<p>If your data include missing values, you may want to become familiar
with the functions <code>is.na()</code>, <code>na.omit()</code>, and
<code>complete.cases()</code>. See below for examples.</p>
<div class="codewrapper sourceCode" id="cb106">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Use any() to check if any values are missing</span></span>
<span><span class="fu">any</span><span class="op">(</span><span class="fu">is.na</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb108">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Use table() to tell you how many are missing vs. not missing</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="fu">is.na</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
FALSE  TRUE
    4     1 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb110">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Identify those elements that are not missing values.</span></span>
<span><span class="fu">complete.cases</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1]  TRUE  TRUE  TRUE FALSE  TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb112">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Identify those elements that are missing values.</span></span>
<span><span class="fu">is.na</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE FALSE FALSE  TRUE FALSE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb114">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Extract those elements that are not missing values.</span></span>
<span><span class="va">rooms</span><span class="op">[</span><span class="fu">complete.cases</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span><span class="op">]</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2 1 1 4</code></pre>
</div>
<p>You can also use <code>!is.na(rooms)</code>, which is exactly the
same as <code>complete.cases(rooms)</code>. The exclamation mark
indicates logical negation.</p>
<div class="codewrapper sourceCode" id="cb116">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">!</span><span class="fu">c</span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE  TRUE</code></pre>
</div>
<p>How you deal with missing data in your analysis is a decision you
will have to make–do you remove it entirely? Do you replace it with
zeros? That will depend on your own methodological questions.</p>
<div id="exercise-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-3" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Using this vector of rooms, create a new vector with the NAs
removed.</li>
</ol>
<div class="codewrapper sourceCode" id="cb118">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rooms</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">8</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li><p>Use the function <code>median()</code> to calculate the median of
the <code>rooms</code> vector.</p></li>
<li><p>Use R to figure out how many households in the room variable have
more than 2 rooms.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb119">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rooms</span> <span class="op">&lt;-</span> <span class="fu">c</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">8</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">rooms_no_na</span> <span class="op">&lt;-</span> <span class="va">rooms</span><span class="op">[</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># or</span></span>
<span><span class="va">rooms_no_na</span> <span class="op">&lt;-</span> <span class="fu">na.omit</span><span class="op">(</span><span class="va">rooms</span><span class="op">)</span></span>
<span><span class="co"># 2.</span></span>
<span><span class="fu">median</span><span class="op">(</span><span class="va">rooms</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 1</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb121">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 3.</span></span>
<span><span class="va">rooms_above_2</span> <span class="op">&lt;-</span> <span class="va">rooms_no_na</span><span class="op">[</span><span class="va">rooms_no_na</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">]</span></span>
<span><span class="fu">length</span><span class="op">(</span><span class="va">rooms_above_2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 4</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have learned how to write scripts, and the basics of R’s
data structures, we are ready to start working with the library catalog
dataset and learn about data frames.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Assign values to object using the assignment operator &lt;-. Remove
existing objects using the <code>rm()</code> function.</li>
<li>Add comments in R scripts using the <code>#</code> operator.</li>
<li>Define and use R functions and arguments.</li>
<li>Getting help with the <code>?</code>, <code>??</code> and
<code>help()</code> functions.</li>
<li>Define the following terms as they relate to R: object, vector,
assign, call, function.</li>
<li>Create or add new objects to a vector using the c() function. Subset
vectors using <code>[]</code>.</li>
<li>Deal with missing data in vectors using the is.na(), na.omit(), and
complete.cases() functions.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-starting-with-data"><p>Content from <a href="02-starting-with-data.html">Starting with Data</a></p>
<hr>
<p>Last updated on 2025-06-03 |

        <a href="https://github.com/librarycarpentry/lc-r/edit/main/episodes/02-starting-with-data.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a working directory?</li>
<li>How can I create new sub-directories in R?</li>
<li>How can I read a complete csv file into R?</li>
<li>How can I get basic summary information about my dataset?</li>
<li>How can I extract certain rows and columns from my data frame?</li>
<li>How can I deal with missing values in R?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Set up the working directory and sub-directories.</li>
<li>Load external data from a .csv file into a data frame.</li>
<li>Describe what a data frame is.</li>
<li>Summarize the contents of a data frame.</li>
<li>Indexing and subsetting data frames.</li>
<li>Explore missing values in data frames.</li>
<li>Use logical operators in data frames.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="create-a-new-r-project">Create a new R project<a class="anchor" aria-label="anchor" href="#create-a-new-r-project"></a>
</h2>
<hr class="half-width">
<p>Let’s create a new project <code>library_carpentry.Rproj</code> in
RStudio to play with our dataset.</p>
<div id="reminder" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="reminder" class="callout-inner">
<h3 class="callout-title">Reminder</h3>
<div class="callout-content">
<p>In the previous episode <a href="https://librarycarpentry.github.io/lc-r/00-before-we-start.html" class="external-link"><code>Before We Start</code></a>,
we briefly walk through how to create an R project to keep all your
scripts, data and analysis. If you need a refreshment, go back to this
episode and follow the instructions on creating an R project folder.</p>
</div>
</div>
</div>
<p>Once you have created the project, open the project in RStudio.</p>
</section><section><h2 class="section-heading" id="getting-data-into-r">Getting data into R<a class="anchor" aria-label="anchor" href="#getting-data-into-r"></a>
</h2>
<hr class="half-width">
<p>We will be using a demo dataset from the University of Houston–Clear
Lake Integrated Library System in 2018. It contains a relatively random
sample of books from the catalog.</p>
<p>In order to use your data in R, you must import it and turn it into
an R <em>object</em>. There are many ways to get data into R.</p>
<ul>
<li><p><strong>Manually</strong>: You can manually create it using the
<code>data.frame()</code> function in Base R, or the
<code>tibble()</code> function in the tidyverse.</p></li>
<li>
<p><strong>Import it from a file</strong> Below is a very incomplete
list</p>
<ul>
<li>Text: TXT (<code>readLines()</code> function)</li>
<li>Tabular data: CSV, TSV (<code>read.table()</code> function or
<code>readr</code> package)</li>
<li>Excel: XLSX (<code>xlsx</code> package)</li>
<li>Google sheets: (<code>googlesheets</code> package)</li>
<li>Statistics program: SPSS, SAS (<code>haven</code> package)</li>
<li>Databases: MySQL (<code>RMySQL</code> package)</li>
</ul>
</li>
<li>
<p><strong>Gather it from the web</strong>: You can connect to
webpages, servers, or APIs directly from within R, or you can create a
data scraped from HTML webpages using the <code>rvest</code> package.
For example</p>
<ul>
<li>the Twitter API with <a href="https://sites.google.com/site/miningtwitter/questions/talking-about/wordclouds/wordcloud1" class="external-link"><code>twitteR</code></a>
</li>
<li>Crossref data with <a href="https://cran.r-project.org/web/packages/rcrossref/rcrossref.pdf" class="external-link"><code>rcrossref</code></a>
</li>
<li>World Bank’s World Development Indicators with <a href="https://cran.r-project.org/web/packages/WDI/WDI.pdf" class="external-link"><code>WDI</code></a>.</li>
</ul>
</li>
</ul>
<div class="section level3">
<h3 id="set-up-your-working-directory">Set up your working directory<a class="anchor" aria-label="anchor" href="#set-up-your-working-directory"></a>
</h3>
<p>The working directory is an important concept to understand. It is
the place on your computer where R will look for and save files. When
you write code for your project, your scripts should refer to files in
relation to the root of your working directory and only to files within
this structure. Using RStudio projects makes this easy and ensures that
your working directory is set up properly.</p>
<p>Using a consistent folder structure across your projects will help
keep things organized and make it easy to find/file things in the
future. This can be especially helpful when you have multiple projects.
In general, you might create directories (folders) for
<strong>scripts</strong>, <strong>data</strong>, and
<strong>documents</strong>. Here are some examples of suggested
directories:</p>
<ul>
<li>
<strong><code>data/</code></strong> Use this folder to store your
raw data and intermediate datasets. For the sake of transparency and <a href="https://en.wikipedia.org/wiki/Provenance" class="external-link">provenance</a>, you
should <em>always</em> keep a copy of your raw data accessible and do as
much of your data cleanup and preprocessing programmatically (i.e., with
scripts, rather than manually) as possible.</li>
<li>
<strong><code>data_output/</code></strong> When you need to modify
your raw data, it might be useful to store the modified versions of the
datasets in a different folder.</li>
<li>
<strong><code>documents/</code></strong> Used for outlines, drafts,
and other text.</li>
<li>
<strong><code>fig_output/</code></strong> This folder can store the
graphics that are generated by your scripts.</li>
<li>
<strong><code>scripts/</code></strong> A place to keep your R
scripts for different analyses or plotting.</li>
</ul>
<p>You may want additional directories or subdirectories depending on
your project needs, but these should form the backbone of your working
directory.</p>
<figure><img src="fig/working-directory-structure.png" alt="Diagram of a Working Directory, with folders for data, data output, documents, fig output, and scripts" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="using-the-getwd-and-setwd-commands" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="using-the-getwd-and-setwd-commands" class="callout-inner">
<h3 class="callout-title">Using the <code>getwd()</code> and
<code>setwd()</code> commands</h3>
<div class="callout-content">
<p>Knowing your current <code>directory</code> is important so that you
save your files, scripts and output in the right location. You can check
your current directory by running <code>getwd()</code> in the RStudio
interface. If for some reason your working directory is not what it
should be, you can change it manually by navigating in the file browser
to where your working directory should be, then by clicking on the blue
gear icon “More”, and selecting “Set As Working Directory”.
Alternatively, you can use
<code>setwd("/path/to/working/directory")</code> to reset your working
directory. However, your scripts should not include this line, because
it will fail on someone else’s computer.</p>
</div>
</div>
</div>
<div id="tips-on-using-the-setwd-command" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tips-on-using-the-setwd-command" class="callout-inner">
<h3 class="callout-title">Tips on Using the <code>setwd()</code>
command</h3>
<div class="callout-content">
<p>Some points to note about setting your working directory:</p>
<ul>
<li><p>The directory must be in quotation marks.</p></li>
<li><p>For Windows users, directories in file paths are separated with a
backslash <code>\</code>. However, in R, you must use a forward slash
<code>/</code>. You can copy and paste from the Windows Explorer window
directly into R and use find/replace (Ctrl/Cmd + F) in R Studio to
replace all backslashes with forward slashes.</p></li>
<li><p>For Mac users, open the Finder and navigate to the directory you
wish to set as your working directory. Right click on that folder and
press the <kbd>options</kbd> key on your keyboard. The ‘Copy “Folder
Name”’ option will transform into ’Copy “Folder Name” as Pathname. It
will copy the path to the folder to the clipboard. You can then paste
this into your <code>setwd()</code> function. You do not need to replace
backslashes with forward slashes.</p></li>
</ul>
<p>After you set your working directory, you can use <code>./</code> to
represent it. So if you have a folder in your directory called
<code>data</code>, you can use read.csv(“./data”) to represent that
sub-directory.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="downloading-the-data">Downloading the data<a class="anchor" aria-label="anchor" href="#downloading-the-data"></a>
</h2>
<hr class="half-width">
<p>Once you have set your working directory, we will create our folder
structure using the <code>dir.create()</code> function.</p>
<p>For this lesson we will use the following folders in our working
directory: <kbd>data/</kbd>, <kbd>data_output/</kbd> and
<kbd>fig_output/</kbd>. Let’s write them all in lowercase to be
consistent. We can create them using the RStudio interface by clicking
on the “New Folder” button in the file pane (bottom right), or directly
from R by typing at console:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"data_output"</span><span class="op">)</span></span>
<span><span class="fu">dir.create</span><span class="op">(</span><span class="st">"fig_output"</span><span class="op">)</span></span></code></pre>
</div>
<p>To download the dataset, go to the Figshare page for this curriculum
and download the dataset called “<code>books.csv</code>”. The direct
download link is: <a href="https://ndownloader.figshare.com/files/22031487" class="external-link">https://ndownloader.figshare.com/files/22031487</a>.
Place this downloaded file in the <code>data/</code> directory that you
just created. <em>Alternatively,</em> you can do this directly from R by
copying and pasting this in your terminal (your instructor can place
this chunk of code in the Etherpad):</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://ndownloader.figshare.com/files/22031487"</span>,</span>
<span>              <span class="st">"data/books.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span></code></pre>
</div>
<p>Now if you navigate to your <code>data</code> folder, the
<code>books.csv</code> file should be there. We now need to load it into
our R session.</p>
</section><section><h2 class="section-heading" id="loading-the-data-into-r">Loading the data into R<a class="anchor" aria-label="anchor" href="#loading-the-data-into-r"></a>
</h2>
<hr class="half-width">
<p>R has some base functions for reading a local data file into your R
session–namely <code>read.table()</code> and <code>read.csv()</code>,
but these have some idiosyncrasies that were improved upon in the
<code>readr</code> package, which is installed and loaded with
<code>tidyverse</code>.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span>  <span class="co"># loads the core tidyverse, including dplyr, readr, ggplot2, purrr</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ purrr     1.0.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div id="prereq2" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Prerequisite</h3>
<div class="callout-content">
<p>Make sure you have the <code>tidyverse</code> package installed in R.
If not, refer back to the episode <code>Before we start</code> on how to
install R packages.</p>
</div>
</div>
</div>
<p>To get our sample data into our R session, we will use the
<code>read_csv()</code> function and assign it to the <code>books</code>
value.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"./data/books.csv"</span><span class="op">)</span></span></code></pre>
</div>
<p>You will see the message
<code>Parsed with column specification</code>, followed by each column
name and its data type. When you execute <code>read_csv</code> on a data
file, it looks through the first 1000 rows of each column and guesses
the data type for each column as it reads it into R. For example, in
this dataset, it reads <code>SUBJECT</code> as
<code>col_character</code> (character), and <code>TOT.CHKOUT</code> as
<code>col_double</code>. You have the option to specify the data type
for a column manually by using the <code>col_types</code> argument in
<code>read_csv</code>.</p>
<p>You should now have an R object called <code>books</code> in the
Environment pane.</p>
<div id="reading-tabular-data" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="reading-tabular-data" class="callout-inner">
<h3 class="callout-title">Reading tabular data</h3>
<div class="callout-content">
<p><code>read_csv()</code> assumes that fields are delineated by commas,
however, in several countries, the comma is used as a decimal separator
and the semicolon (;) is used as a field delineator. If you want to read
in this type of files in R, you can use the <code>read_csv2</code>
function. It behaves exactly like <code>read_csv</code> but uses
different parameters for the decimal and the field separators. If you
are working with another format, they can be both specified by the user.
Check out the help for <code>read_csv()</code> by typing
<code>?read_csv</code> to learn more. There is also the
<code>read_tsv()</code> for tab-separated data files, and
<code>read_delim()</code> allows you to specify more details about the
structure of your file.</p>
</div>
</div>
</div>
<figure style="text-align: center"><img src="fig/booksImport.PNG" alt="RStudio environment pane showing one object 'books' with 10000 observations of 12 variables" class="figure mx-auto d-block"><figcaption>
The books CSV loaded as a tibble in your R environment
</figcaption></figure><div id="discussion-examine-the-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="discussion-examine-the-data" class="callout-inner">
<h3 class="callout-title">Discussion: Examine the data</h3>
<div class="callout-content">
<p>Open and examine the data in R. How many observations and variables
are there?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The data contains 10,000 observations and 11 variables.</p>
<ul>
<li>
<code>CALL...BIBLIO.</code> : Bibliographic call number. Most of
these are cataloged with the Library of Congress classification, but
there are also items cataloged in the Dewey Decimal System (including
fiction and non-fiction), and Superintendent of Documents call numbers.
Character.</li>
<li>
<code>X245.ab</code> : The title and remainder of title. Exported
from MARC tag 245|ab fields. Separated by a <code>|</code> pipe
character. Character.</li>
<li>
<code>X245.c</code> : The author (statement of responsibility).
Exported from MARC tag 245|c. Character.</li>
<li>
<code>TOT.CHKOUT</code> : The total number of checkouts.
Integer.</li>
<li>
<code>LOUTDATE</code> : The last date the item was checked out.
Date. YYYY-MM-DDThh:mmTZD</li>
<li>
<code>SUBJECT</code> : Bibliographic subject in Library of Congress
Subject Headings. Separated by a <code>|</code> pipe character.
Character.</li>
<li>
<code>ISN</code> : ISBN or ISSN. Exported from MARC field 020|a.
Character</li>
<li>
<code>CALL...ITEM</code> : Item call number. Most of these are
<code>NA</code> but there are some secondary call numbers.</li>
<li>
<code>X008.Date.One</code> : Date of publication. Date. YYYY</li>
<li>
<code>BCODE2</code> : Item format. Character.</li>
<li>
<code>BCODE1</code> Sub-collection. Character.</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="data-frames-and-tibbles">Data frames and tibbles<a class="anchor" aria-label="anchor" href="#data-frames-and-tibbles"></a>
</h2>
<hr class="half-width">
<p>Data frames are the <em>de facto</em> data structure for tabular data
in <code>R</code>, and what we use for data processing, statistics, and
plotting.</p>
<p>A <strong>data frame</strong> is the representation of data in the
format of a table where the columns are vectors that all have the same
length. Because columns are vectors, each column must contain a single
type of data (e.g., characters, integers, factors). For example, here is
a figure depicting a data frame comprising a numeric, a character, and a
logical vector.</p>
<figure><img src="fig/data-frame.svg" alt="A graphical depiction of a data frame. The first vector (column) is numeric; the second is character, and the third is logical." style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>A data frame can be created by hand, but most commonly they are
generated by the functions <code>read_csv()</code> or
<code>read_table()</code>; in other words, when importing spreadsheets
from your hard drive (or the web).</p>
<p>A <strong>tibble</strong> is an extension of <code>R</code> data
frames used by the <em>tidyverse</em>. When the data is read using
<code>read_csv()</code>, it is stored in an object of class
<code>tbl_df</code>, <code>tbl</code>, and <code>data.frame</code>. You
can see the class of an object with <code>class()</code>.</p>
</section><section><h2 class="section-heading" id="inspecting-data-frames">Inspecting data frames<a class="anchor" aria-label="anchor" href="#inspecting-data-frames"></a>
</h2>
<hr class="half-width">
<p>When calling a <code>tbl_df</code> object (like <code>books</code>
here), there is already a lot of information about our data frame being
displayed such as the number of rows, the number of columns, the names
of the columns, and as we just saw the class of data stored in each
column. However, there are functions to extract this information from
data frames. Here is a non-exhaustive list of some of these functions.
Let’s try them out!</p>
<p><br></p>
<div class="section level3">
<h3 id="size-and-dimensions">
<strong>Size and dimensions</strong><a class="anchor" aria-label="anchor" href="#size-and-dimensions"></a>
</h3>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">dim</span>(books)  <span class="co"># returns a vector with the number of rows in the first element, </span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>and the number of columns as the second <span class="fu">element</span> (the <span class="sc">**</span>dim<span class="sc">**</span>ensions of the object)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">nrow</span>(books)  <span class="co"># returns the number of rows</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="fu">ncol</span>(books)  <span class="co"># returns the number of columns</span></span></code></pre>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="content">
<strong>Content</strong><a class="anchor" aria-label="anchor" href="#content"></a>
</h3>
<p>To examine the contents of a data frame.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">books</span><span class="op">)</span>  <span class="co"># shows the first 6 rows</span></span>
<span><span class="fu">tail</span><span class="op">(</span><span class="va">books</span><span class="op">)</span>  <span class="co"># shows the last 6 rows</span></span></code></pre>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="names">
<strong>Names</strong><a class="anchor" aria-label="anchor" href="#names"></a>
</h3>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">names</span>(books)  <span class="co"># returns the column names (synonym of `colnames()` for </span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="st">`</span><span class="at">data.frame</span><span class="st">`</span> objects<span class="er">)</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">glimpse</span>(books)  <span class="co"># print names of the books data frame to the console</span></span></code></pre>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="summary">
<strong>Summary</strong><a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode r" tabindex="0"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">View</span>(books)  <span class="co"># look at the data in the viewer</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">str</span>(books)  <span class="co"># structure of the object and information about the class, </span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>length and content of each column</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="fu">summary</span>(books)  <span class="co"># summary statistics for each column</span></span></code></pre>
</div>
<p>Note: most of these functions are “generic”, they can be used on
other types of objects besides data frames.</p>
<p>The <code>map()</code> function from <code>purrr</code> is a useful
way of running a function on all variables in a data frame or list. If
you loaded the <code>tidyverse</code> at the beginning of the session,
you also loaded <code>purrr</code>. Here we call <code>class()</code> on
<code>books</code> using <code>map_chr()</code>, which will return a
character vector of the classes for each variable.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">map_chr</span><span class="op">(</span><span class="va">books</span>, <span class="va">class</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CALL...BIBLIO.        X245.ab         X245.c       LOCATION     TOT.CHKOUT
   "character"    "character"    "character"    "character"      "numeric"
      LOUTDATE        SUBJECT            ISN   CALL...ITEM.  X008.Date.One
   "character"    "character"    "character"    "character"    "character"
        BCODE2         BCODE1
   "character"    "character" </code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="indexing-and-subsetting-data-frames">Indexing and subsetting data frames<a class="anchor" aria-label="anchor" href="#indexing-and-subsetting-data-frames"></a>
</h2>
<hr class="half-width">
<p>Our <code>books</code> data frame has 2 dimensions: rows
(observations) and columns (variables). If we want to extract some
specific data from it, we need to specify the “coordinates” we want from
it.</p>
<p>In the last session, we used square brackets <code>[ ]</code> to
subset values from vectors. Here we will do the same thing for data
frames, but we can now add a second dimension. Row numbers come first,
followed by column numbers. However, note that different ways of
specifying these coordinates lead to results with different classes.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## first element in the first column of the data frame (as a vector)</span></span>
<span><span class="va">books</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">## first element in the 6th column (as a vector)</span></span>
<span><span class="va">books</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">]</span></span>
<span><span class="co">## first column of the data frame (as a vector)</span></span>
<span><span class="va">books</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">## first column of the data frame (as a data.frame)</span></span>
<span><span class="va">books</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">## first three elements in the 7th column (as a vector)</span></span>
<span><span class="va">books</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">7</span><span class="op">]</span></span>
<span><span class="co">## the 3rd row of the data frame (as a data.frame)</span></span>
<span><span class="va">books</span><span class="op">[</span><span class="fl">3</span>, <span class="op">]</span></span>
<span><span class="co">## equivalent to head_books &lt;- head(books)</span></span>
<span><span class="va">head_books</span> <span class="op">&lt;-</span> <span class="va">books</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="op">]</span></span></code></pre>
</div>
<p><br></p>
<div class="section level3">
<h3 id="dollar-sign">
<strong>Dollar sign</strong><a class="anchor" aria-label="anchor" href="#dollar-sign"></a>
</h3>
<p>The dollar sign <code>$</code> is used to distinguish a specific
variable (column, in Excel-speak) in a data frame:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">head</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">X245.ab</span><span class="op">)</span>  <span class="co"># print the first six book titles</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Bermuda Triangle /"
[2] "Invaders from outer space :|real-life stories of UFOs /"
[3] "Down Cut Shin Creek :|the pack horse librarians of Kentucky /"
[4] "The Chinese book of animal powers /"
[5] "Judge Judy Sheindlin's Win or lose by how you choose! /"
[6] "Judge Judy Sheindlin's You can't judge a book by its cover :|cool rules for school /"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print the mean number of checkouts</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">TOT.CHKOUT</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 2.2847</code></pre>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="unique-table-and-duplicated">
<strong><code>unique()</code>, <code>table()</code>, and
<code>duplicated()</code></strong><a class="anchor" aria-label="anchor" href="#unique-table-and-duplicated"></a>
</h3>
<p>Use <code>unique()</code> to see all the distinct values in a
variable:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">unique</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">BCODE2</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> [1] "a" "w" "s" "m" "e" "4" "k" "5" "n" "o"</code></pre>
</div>
<p>Take one step further with <code>table()</code> to get quick
frequency counts on a variable:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">BCODE2</span><span class="op">)</span>  <span class="co"># frequency counts on a variable</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   4    5    a    e    k    m    n    o    s    w
   1    3 6983   68    3  109    2   21 1988  822 </code></pre>
</div>
<p>You can combine <code>table()</code> with relational operators:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">TOT.CHKOUT</span> <span class="op">&gt;</span> <span class="fl">50</span><span class="op">)</span>  <span class="co"># how many books have 50 or more checkouts?</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
FALSE  TRUE
 9991     9 </code></pre>
</div>
<p><code>duplicated()</code> will give you the a logical vector of
duplicated values.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">duplicated</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">ISN</span><span class="op">)</span>  <span class="co"># a TRUE/FALSE vector of duplicated values in the ISN column</span></span>
<span><span class="op">!</span><span class="fu">duplicated</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">ISN</span><span class="op">)</span>  <span class="co"># you can put an exclamation mark before it to get non-duplicated values</span></span>
<span><span class="fu">table</span><span class="op">(</span><span class="fu">duplicated</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">ISN</span><span class="op">)</span><span class="op">)</span>  <span class="co"># run a table of duplicated values</span></span>
<span><span class="fu">which</span><span class="op">(</span><span class="fu">duplicated</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">ISN</span><span class="op">)</span><span class="op">)</span>  <span class="co"># get row numbers of duplicated values</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="explore-missing-values">Explore missing values<a class="anchor" aria-label="anchor" href="#explore-missing-values"></a>
</h2>
<hr class="half-width">
<p>You may also need to know the number of missing values:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sum</span><span class="op">(</span><span class="fu">is.na</span><span class="op">(</span><span class="va">books</span><span class="op">)</span><span class="op">)</span>  <span class="co"># How many total missing values?</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 14509</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">colSums</span><span class="op">(</span><span class="fu">is.na</span><span class="op">(</span><span class="va">books</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Total missing values per column</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CALL...BIBLIO.        X245.ab         X245.c       LOCATION     TOT.CHKOUT
           561             12           2801              0              0
      LOUTDATE        SUBJECT            ISN   CALL...ITEM.  X008.Date.One
             0             63           2934           7980            158
        BCODE2         BCODE1
             0              0 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="fu">is.na</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">ISN</span><span class="op">)</span><span class="op">)</span>  <span class="co"># use table() and is.na() in combination</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
FALSE  TRUE
 7066  2934 </code></pre>
</div>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">booksNoNA</span> <span class="op">&lt;-</span> <span class="fu">na.omit</span><span class="op">(</span><span class="va">books</span><span class="op">)</span>  <span class="co"># Return only observations that have no missing values</span></span></code></pre>
</div>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Recall how we use <code>na.rm</code>, <code>is.na()</code>,
<code>na.omit()</code>, and <code>complete.cases()</code> when dealing
with vectors.</p>
</div>
</div>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Call <code>View(books)</code> to examine the data frame. Use the
small arrow buttons in the variable name to sort tot_chkout by the
highest checkouts. What item has the most checkouts?</p></li>
<li><p>What is the class of the TOT.CHKOUT variable?</p></li>
<li><p>Use <code>table()</code> and <code>is.na()</code> to find out how
many NA values are in the ISN variable.</p></li>
<li><p>Call <code>summary(books$TOT.CHKOUT)</code>. What can we infer
when we compare the mean, median, and max?</p></li>
<li><p><code>hist()</code> will print a rudimentary histogram, which
displays frequency counts. Call <code>hist(books$TOT.CHKOUT)</code>.
What is this telling us?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>Highest checkouts:
<code>Click, clack, moo : cows that type.</code></p></li>
<li><p><code>class(books$TOT.CHKOUT)</code> returns
<code>numeric</code></p></li>
<li><p><code>table(is.na(books$ISN))</code> returns 2934
<code>TRUE</code> values</p></li>
<li><p>The median is 0, indicating that, consistent with all book
circulation I have seen, the majority of items have 0
checkouts.</p></li>
<li><p>As we saw in <code>summary()</code>, the majority of items have a
small number of checkouts</p></li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="logical-tests">Logical tests<a class="anchor" aria-label="anchor" href="#logical-tests"></a>
</h2>
<hr class="half-width">
<p>R contains a number of operators you can use to compare values. Use
<code>help(Comparison)</code> to read the R help file.</p>
<table class="table">
<thead><tr class="header">
<th>operator</th>
<th>function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td>Less Than</td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>Greater Than</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td>Equal To</td>
</tr>
<tr class="even">
<td><code>&lt;=</code></td>
<td>Less Than or Equal To</td>
</tr>
<tr class="odd">
<td><code>&gt;=</code></td>
<td>Greater Than or Equal To</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>Not Equal To</td>
</tr>
<tr class="odd">
<td><code>%in%</code></td>
<td>Has a Match In</td>
</tr>
<tr class="even">
<td><code>is.na()</code></td>
<td>Is NA</td>
</tr>
<tr class="odd">
<td><code>!is.na()</code></td>
<td>Is Not NA</td>
</tr>
</tbody>
</table>
<div id="callout5" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Note that the <strong>two equal signs</strong> (<code>==</code>) are
used for evaluating equality because one equals sign (<code>=</code>) is
used for assigning variables.</p>
</div>
</div>
</div>
<p>A simple logical test using numeric comparison:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&lt;</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] TRUE</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">2</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] FALSE</code></pre>
</div>
<p>Sometimes you need to do multiple logical tests (think Boolean
logic). Use <code>help(Logic)</code> to read the help file.</p>
<table class="table">
<thead><tr class="header">
<th>operator</th>
<th>function</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>&amp;</code></td>
<td>boolean AND</td>
</tr>
<tr class="even">
<td>`</td>
<td>`</td>
</tr>
<tr class="odd">
<td><code>!</code></td>
<td>Boolean NOT</td>
</tr>
<tr class="even">
<td><code>any()</code></td>
<td>Are some values true?</td>
</tr>
<tr class="odd">
<td><code>all()</code></td>
<td>Are all values true?</td>
</tr>
</tbody>
</table>
<p><br></p>
<div class="section level3">
<h3 id="logical-subsetting">
<strong>Logical Subsetting</strong><a class="anchor" aria-label="anchor" href="#logical-subsetting"></a>
</h3>
<p>We can use logical operators to subset our data, just like how we use
the square brackets <code>[]</code> for subsetting.</p>
<p>For instance, if we want to extract rows with <em>Total Checkout
Number</em> of more than 5:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span><span class="op">[</span><span class="va">books</span><span class="op">$</span><span class="va">TOT.CHKOUT</span> <span class="op">&gt;</span> <span class="fl">5</span>, <span class="op">]</span></span></code></pre>
</div>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>Compare the output of the following codes to the previous one:</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span><span class="op">$</span><span class="va">TOT.CHKOUT</span> <span class="op">&gt;</span> <span class="fl">5</span></span>
<span><span class="va">books</span><span class="op">[</span><span class="va">books</span><span class="op">$</span><span class="va">TOT.CHKOUT</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">]</span></span></code></pre>
</div>
<p>What differences did you see in the output?</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>getwd()</code> and <code>setwd()</code> to navigate
between directories.</li>
<li>Use <code>read_csv()</code> from tidyverse to read tabular data into
R.</li>
<li>Data frames are made up of vectors of equal length, with each vector
representing each column of the data frame.</li>
<li>Summarise the dimension, content and variables in a data frame.</li>
<li>Using the square brackets <code>[]</code> and logical operators to
subset data frames.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-data-cleaning-and-transformation"><p>Content from <a href="03-data-cleaning-and-transformation.html">Data cleaning &amp; transformation with dplyr</a></p>
<hr>
<p>Last updated on 2025-06-03 |

        <a href="https://github.com/librarycarpentry/lc-r/edit/main/episodes/03-data-cleaning-and-transformation.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I create new columns or remove exisitng columns from a data
frame?</li>
<li>How can I rename variables or assign new values to a variable?</li>
<li>How can I combine multiple commands into a single command?</li>
<li>How can I export my data frame to a csv file?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the functions available in the
<strong><code>dplyr</code></strong> and
<strong><code>tidyr</code></strong> packages.</li>
<li>Recognise and use the following functions: <code>select()</code>,
<code>filter()</code>, <code>rename()</code>, <code>recode()</code>,
<code>mutate()</code> and <code>arrange()</code>.</li>
<li>Combine one or more functions using the ‘pipe’ operator
<code>%&gt;%</code>.</li>
<li>Use the split-apply-combine concept for data analysis.</li>
<li>Export a data frame to a csv file.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="transforming-data-with-dplyr">Transforming data with <code>dplyr</code>
<a class="anchor" aria-label="anchor" href="#transforming-data-with-dplyr"></a>
</h2>
<hr class="half-width">
<p>We are now entering the data cleaning and transforming phase. While
it is possible to do much of the following using Base R functions (in
other words, without loading an external package) <code>dplyr</code>
makes it much easier. Like many of the most useful R packages,
<code>dplyr</code> was developed by data scientist <a href="Hadley%20Wickham">http://hadley.nz/</a>.</p>
<p><code>dplyr</code> is a package for making tabular data manipulation
easier by using a limited set of functions that can be combined to
extract and summarize insights from your data. It pairs nicely with
<strong><code>tidyr</code></strong> which enables you to swiftly convert
between different data formats (long vs. wide) for plotting and
analysis.</p>
<p><code>dplyr</code> is also part of the <code>tidyverse.</code> Let’s
make sure we are all on the same page by loading the
<code>tidyverse</code> and the <code>books</code> dataset we downloaded
earlier.</p>
<p>We’re going to learn some of the most common
<strong><code>dplyr</code></strong> functions:</p>
<ul>
<li>
<code>rename()</code>: rename columns</li>
<li>
<code>recode()</code>: recode values in a column</li>
<li>
<code>select()</code>: subset columns</li>
<li>
<code>filter()</code>: subset rows on conditions</li>
<li>
<code>mutate()</code>: create new columns by using information from
other columns</li>
<li>
<code>group_by()</code> and <code>summarize()</code>: create summary
statistics on grouped data</li>
<li>
<code>arrange()</code>: sort results</li>
<li>
<code>count()</code>: count discrete values</li>
</ul>
<p><br></p>
<div id="getting-set-up" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="getting-set-up" class="callout-inner">
<h3 class="callout-title">Getting set up</h3>
<div class="callout-content">
<p>Make sure you have your Rproj and directories set up from the
previous episode.</p>
<p><strong>If you have not completed that step</strong>, run the
following in your Rproj:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">fs</span><span class="op">)</span>   <span class="co"># https://fs.r-lib.org/.  fs is a cross-platform, uniform interface to file system operations via R.</span></span>
<span><span class="fu">dir_create</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu">dir_create</span><span class="op">(</span><span class="st">"data_output"</span><span class="op">)</span></span>
<span><span class="fu">dir_create</span><span class="op">(</span><span class="st">"fig_output"</span><span class="op">)</span></span>
<span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://ndownloader.figshare.com/files/22031487"</span>,</span>
<span>              <span class="st">"data/books.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span></code></pre>
</div>
<p>Then load the <code>tidyverse</code> package</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ purrr     1.0.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<p>and the <code>books</code> data we saved in the previous lesson.</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/books.csv"</span><span class="op">)</span>  <span class="co"># load the data and assign it to books</span></span></code></pre>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="renaming-variables">Renaming variables<a class="anchor" aria-label="anchor" href="#renaming-variables"></a>
</h2>
<hr class="half-width">
<p>It is often necessary to rename variables to make them more
meaningful. If you print the names of the sample <code>books</code>
dataset you can see that some of the vector names are not particularly
helpful:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">books</span><span class="op">)</span>  <span class="co"># print names of the books data frame to the console</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Rows: 10,000
Columns: 12
$ CALL...BIBLIO. &lt;chr&gt; "001.94 Don 2000", "001.942 Bro 1999", "027.073 App 200…
$ X245.ab        &lt;chr&gt; "Bermuda Triangle /", "Invaders from outer space :|real…
$ X245.c         &lt;chr&gt; "written by Andrew Donkin.", "written by Philip Brooks.…
$ LOCATION       &lt;chr&gt; "juv", "juv", "juv", "juv", "juv", "juv", "juv", "juv",…
$ TOT.CHKOUT     &lt;dbl&gt; 6, 2, 3, 6, 7, 6, 4, 2, 4, 13, 6, 7, 3, 22, 2, 9, 4, 8,…
$ LOUTDATE       &lt;chr&gt; "11-21-2013 9:44", "02-07-2004 15:29", "10-16-2007 10:5…
$ SUBJECT        &lt;chr&gt; "Readers (Elementary)|Bermuda Triangle -- Juvenile lite…
$ ISN            &lt;chr&gt; "0789454165 (hbk.)~0789454157 (pbk.)", "0789439999 (har…
$ CALL...ITEM.   &lt;chr&gt; "001.94 Don 2000", "001.942 Bro 1999", "027.073 App 200…
$ X008.Date.One  &lt;chr&gt; "2000", "1999", "2001", "1999", "2000", "2001", "2001",…
$ BCODE2         &lt;chr&gt; "a", "a", "a", "a", "a", "a", "a", "a", "a", "a", "a", …
$ BCODE1         &lt;chr&gt; "j", "j", "j", "j", "j", "j", "j", "j", "j", "j", "j", …</code></pre>
</div>
<p>There are many ways to rename variables in R, but the
<code>rename()</code> function in the <code>dplyr</code> package is the
easiest and most straightforward. The new variable name comes first. See
<code>help(rename)</code>.</p>
<p>Here we rename the X245.ab variable. Make sure you assign the output
to your <code>books</code> value, otherwise it will just print it to the
console. In other words, we are overwriting the previous
<code>books</code> value with the new one, with <code>X245.ab</code>
renamed to <code>title</code>.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># rename the . Make sure you return (&lt;-) the output to your</span></span>
<span><span class="co"># variable, otherwise it will just print it to the console</span></span>
<span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu">rename</span><span class="op">(</span><span class="va">books</span>,</span>
<span>                title <span class="op">=</span> <span class="va">X245.ab</span><span class="op">)</span></span></code></pre>
</div>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tip" class="callout-inner">
<h3 class="callout-title">Tip:</h3>
<div class="callout-content">
<p>When using the <code>rename()</code> function, the new variable name
comes first.</p>
</div>
</div>
</div>
<div id="side-note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="side-note" class="callout-inner">
<h3 class="callout-title">Side note:</h3>
<div class="callout-content">
<p>Where does <code>X245.ab</code> come from? That is the MARC field
245|ab. However, because R variables cannot start with a number, R
automatically inserted an X, and because pipes | are not allowed in
variable names, R replaced it with a period.</p>
</div>
</div>
</div>
<p>You can also rename multiple variables at once by running:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># rename multiple variables at once</span></span>
<span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu">rename</span><span class="op">(</span><span class="va">books</span>,</span>
<span>                author <span class="op">=</span> <span class="va">X245.c</span>,</span>
<span>                callnumber <span class="op">=</span> <span class="va">CALL...BIBLIO.</span>,</span>
<span>                isbn <span class="op">=</span> <span class="va">ISN</span>,</span>
<span>                pubyear <span class="op">=</span> <span class="va">X008.Date.One</span>,</span>
<span>                subCollection <span class="op">=</span> <span class="va">BCODE1</span>,</span>
<span>                format <span class="op">=</span> <span class="va">BCODE2</span>,</span>
<span>                location <span class="op">=</span> <span class="va">LOCATION</span>,</span>
<span>                tot_chkout <span class="op">=</span> <span class="va">TOT.CHKOUT</span>,</span>
<span>                loutdate <span class="op">=</span> <span class="va">LOUTDATE</span>,</span>
<span>                subject <span class="op">=</span> <span class="va">SUBJECT</span><span class="op">)</span></span>
<span><span class="va">books</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 10,000 × 12
   callnumber        title     author location tot_chkout loutdate subject isbn
   &lt;chr&gt;             &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;
 1 001.94 Don 2000   Bermuda … writt… juv               6 11-21-2… Reader… 0789…
 2 001.942 Bro 1999  Invaders… writt… juv               2 02-07-2… Reader… 0789…
 3 027.073 App 2001  Down Cut… by Ka… juv               3 10-16-2… Packho… 0060…
 4 133.5 Hua 1999    The Chin… by Ch… juv               6 11-22-2… Astrol… 0060…
 5 170 She 2000      Judge Ju… illus… juv               7 04-10-2… Childr… 0060…
 6 170.44 She 2001   Judge Ju… illus… juv               6 11-12-2… Conduc… 0060…
 7 220.9505 Gil 2001 A young … retol… juv               4 12-01-2… Bible … 0060…
 8 225.9505 McC 1999 God's Ki… retol… juv               2 08-06-2… Bible … 0689…
 9 292.13 McC 2001   Roman my… retol… juv               4 04-03-2… Mythol… 0689…
10 292.211 McC 1998  Greek go… retol… juv              13 11-16-2… Gods, … 0689…
# ℹ 9,990 more rows
# ℹ 4 more variables: CALL...ITEM. &lt;chr&gt;, pubyear &lt;chr&gt;, format &lt;chr&gt;,
#   subCollection &lt;chr&gt;</code></pre>
</div>
<div id="rename-call...item." class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="rename-call...item." class="callout-inner">
<h3 class="callout-title">Rename <code>CALL...ITEM.</code>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Use <code>rename()</code> to rename the <code>CALL...ITEM.</code>
column to <code>callnumber2</code>. Remember to add the period to the
end of the <code>CALL...ITEM.</code> value</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu">rename</span><span class="op">(</span><span class="va">books</span>,</span>
<span>                callnumber2 <span class="op">=</span> <span class="va">CALL...ITEM.</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="recoding-values">Recoding values<a class="anchor" aria-label="anchor" href="#recoding-values"></a>
</h3>
<p>It is often necessary to recode or reclassify values in your data.
For example, in the sample dataset provided to you, the
<code>sub_collection</code> (formerly <code>BCODE1</code>) and
<code>format</code> (formerly <code>BCODE2</code>) variables contain
single characters.</p>
<figure style="text-align: center"><img src="fig/BCODE1.png" alt="Screen capture of window that says 'Select Me' with categories like Archival collections and Reference" class="figure mx-auto d-block"><figcaption>
Sub-Collection (formerly BCODE1) export from Sierra
</figcaption></figure><figure style="text-align: center"><img src="fig/BCODE2.png" alt="Screen capture of window that says 'Select Me' with items like 'Archives' and 'E-Book'" class="figure mx-auto d-block"><figcaption>
Format (formerly BCODE2) export from Sierra
</figcaption></figure><p>You can reassign names to the values easily using the
<code>recode()</code> function from the <code>dplyr</code> package.
Unlike <code>rename()</code>, the old value comes first here. Also
notice that we are overwriting the <code>books$subCollection</code>
variable.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first print to the console all of the unique values you will need to recode</span></span>
<span><span class="fu">distinct</span><span class="op">(</span><span class="va">books</span>, <span class="va">subCollection</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>FALSE # A tibble: 10 × 1
FALSE    subCollection
FALSE    &lt;chr&gt;
FALSE  1 j
FALSE  2 b
FALSE  3 u
FALSE  4 r
FALSE  5 -
FALSE  6 s
FALSE  7 c
FALSE  8 z
FALSE  9 a
FALSE 10 t</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span><span class="op">$</span><span class="va">subCollection</span> <span class="op">&lt;-</span> <span class="fu">recode</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">subCollection</span>,</span>
<span>                                      <span class="st">"-"</span> <span class="op">=</span> <span class="st">"general collection"</span>,</span>
<span>                                      u <span class="op">=</span> <span class="st">"government documents"</span>,</span>
<span>                                      r <span class="op">=</span> <span class="st">"reference"</span>,</span>
<span>                                      b <span class="op">=</span> <span class="st">"k-12 materials"</span>,</span>
<span>                                      j <span class="op">=</span> <span class="st">"juvenile"</span>,</span>
<span>                                      s <span class="op">=</span> <span class="st">"special collections"</span>,</span>
<span>                                      c <span class="op">=</span> <span class="st">"computer files"</span>,</span>
<span>                                      t <span class="op">=</span> <span class="st">"theses"</span>,</span>
<span>                                      a <span class="op">=</span> <span class="st">"archives"</span>,</span>
<span>                                      z <span class="op">=</span> <span class="st">"reserves"</span><span class="op">)</span></span>
<span><span class="va">books</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>FALSE # A tibble: 10,000 × 12
FALSE    callnumber        title     author location tot_chkout loutdate subject isbn
FALSE    &lt;chr&gt;             &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;
FALSE  1 001.94 Don 2000   Bermuda … writt… juv               6 11-21-2… Reader… 0789…
FALSE  2 001.942 Bro 1999  Invaders… writt… juv               2 02-07-2… Reader… 0789…
FALSE  3 027.073 App 2001  Down Cut… by Ka… juv               3 10-16-2… Packho… 0060…
FALSE  4 133.5 Hua 1999    The Chin… by Ch… juv               6 11-22-2… Astrol… 0060…
FALSE  5 170 She 2000      Judge Ju… illus… juv               7 04-10-2… Childr… 0060…
FALSE  6 170.44 She 2001   Judge Ju… illus… juv               6 11-12-2… Conduc… 0060…
FALSE  7 220.9505 Gil 2001 A young … retol… juv               4 12-01-2… Bible … 0060…
FALSE  8 225.9505 McC 1999 God's Ki… retol… juv               2 08-06-2… Bible … 0689…
FALSE  9 292.13 McC 2001   Roman my… retol… juv               4 04-03-2… Mythol… 0689…
FALSE 10 292.211 McC 1998  Greek go… retol… juv              13 11-16-2… Gods, … 0689…
FALSE # ℹ 9,990 more rows
FALSE # ℹ 4 more variables: callnumber2 &lt;chr&gt;, pubyear &lt;chr&gt;, format &lt;chr&gt;,
FALSE #   subCollection &lt;chr&gt;</code></pre>
</div>
<p>Do the same for the <code>format</code> column. Note that you must
put <code>"5"</code> and <code>"4"</code> into quotation marks for the
function to operate correctly.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span><span class="op">$</span><span class="va">format</span> <span class="op">&lt;-</span> <span class="fu">recode</span><span class="op">(</span><span class="va">books</span><span class="op">$</span><span class="va">format</span>,</span>
<span>                              a <span class="op">=</span> <span class="st">"book"</span>,</span>
<span>                              e <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>                              w <span class="op">=</span> <span class="st">"microform"</span>,</span>
<span>                              s <span class="op">=</span> <span class="st">"e-gov doc"</span>,</span>
<span>                              o <span class="op">=</span> <span class="st">"map"</span>,</span>
<span>                              n <span class="op">=</span> <span class="st">"database"</span>,</span>
<span>                              k <span class="op">=</span> <span class="st">"cd-rom"</span>,</span>
<span>                              m <span class="op">=</span> <span class="st">"image"</span>,</span>
<span>                              <span class="st">"5"</span> <span class="op">=</span> <span class="st">"kit/object"</span>,</span>
<span>                              <span class="st">"4"</span> <span class="op">=</span> <span class="st">"online video"</span><span class="op">)</span></span></code></pre>
</div>
<p>Once you have finished recoding the values for the two variables,
examine the dataset again and check to see if you have different values
this time:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">distinct</span><span class="op">(</span><span class="va">books</span>, <span class="va">subCollection</span>, <span class="va">format</span><span class="op">)</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="subsetting-dataframes">Subsetting dataframes<a class="anchor" aria-label="anchor" href="#subsetting-dataframes"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="subset-rows-with-filter">
<strong>Subset rows with <code>filter()</code></strong><a class="anchor" aria-label="anchor" href="#subset-rows-with-filter"></a>
</h3>
<p>In the last lesson we learned how to subset a data frame using
brackets. As with other R functions, the <code>dplyr</code> package
makes it much more straightforward, using the <code>filter()</code>
function.</p>
<p>Here we will create a subset of <code>books</code> called
<code>booksOnly</code>, which includes only those items where the format
is books. Notice that we use two equal signs <code>==</code> as the
logical operator:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">booksOnly</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">books</span>, <span class="va">format</span> <span class="op">==</span> <span class="st">"book"</span><span class="op">)</span> <span class="co"># filter books to return only those items where the format is books</span></span></code></pre>
</div>
<p>You can also use multiple filter conditions. Here, the order matters:
first we filter to include only books, then of the results, we include
only items that have more than zero checkouts.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bookCheckouts</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">books</span>,</span>
<span>                        <span class="va">format</span> <span class="op">==</span> <span class="st">"book"</span>,</span>
<span>                        <span class="va">tot_chkout</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span></code></pre>
</div>
<p>How many items were removed? You can find out functionally with:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">nrow</span><span class="op">(</span><span class="va">books</span><span class="op">)</span> <span class="op">-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">bookCheckouts</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>FALSE [1] 5733</code></pre>
</div>
<p>You can then check the summary statistics of checkouts for books with
more than zero checkouts. Notice how different these numbers are from
the previous lesson, when we kept zero in. The median is now 3 and the
mean is 5.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">summary</span><span class="op">(</span><span class="va">bookCheckouts</span><span class="op">$</span><span class="va">tot_chkout</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>FALSE    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
FALSE   1.000   2.000   3.000   5.281   6.000 113.000</code></pre>
</div>
<p>If you want to filter on multiple conditions within the same
variable, use the <code>%in%</code> operator combined with a vector of
all the values you wish to include within <code>c()</code>. For example,
you may want to include only items in the format <code>serial</code> and
<code>microform</code>:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">serial_microform</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">books</span>, <span class="va">format</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"serial"</span>, <span class="st">"microform"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise-subsetting-with-filter" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-subsetting-with-filter" class="callout-inner">
<h3 class="callout-title">Exercise: Subsetting with
<code>filter()</code>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li><p>Use <code>filter()</code> to create a data frame called
<code>booksJuv</code> consisting of <code>format</code> books and
<code>subCollection</code> juvenile materials.</p></li>
<li><p>Use <code>mean()</code> to check the average number of checkouts
for the <code>booksJuv</code> data frame.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">booksJuv</span> <span class="op">&lt;-</span> <span class="fu">filter</span><span class="op">(</span><span class="va">books</span>,</span>
<span>               <span class="va">format</span> <span class="op">==</span> <span class="st">"book"</span>,</span>
<span>               <span class="va">subCollection</span> <span class="op">==</span>  <span class="st">"juvenile"</span><span class="op">)</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">booksJuv</span><span class="op">$</span><span class="va">tot_chkout</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 10.41404</code></pre>
</div>
</div>
</div>
</div>
</div>
<p><br></p>
</div>
<div class="section level3">
<h3 id="subset-columns-with-select">
<strong>Subset columns with <code>select()</code></strong><a class="anchor" aria-label="anchor" href="#subset-columns-with-select"></a>
</h3>
<p>The <code>select()</code> function allows you to keep or remove
specific columns It also provides a convenient way to reorder
variables.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># specify the variables you want to keep by name</span></span>
<span><span class="va">booksTitleCheckouts</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">books</span>, <span class="va">title</span>, <span class="va">tot_chkout</span><span class="op">)</span></span>
<span><span class="va">booksTitleCheckouts</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 10,000 × 2
   title                                                              tot_chkout
   &lt;chr&gt;                                                                   &lt;dbl&gt;
 1 Bermuda Triangle /                                                          6
 2 Invaders from outer space :|real-life stories of UFOs /                     2
 3 Down Cut Shin Creek :|the pack horse librarians of Kentucky /               3
 4 The Chinese book of animal powers /                                         6
 5 Judge Judy Sheindlin's Win or lose by how you choose! /                     7
 6 Judge Judy Sheindlin's You can't judge a book by its cover :|cool…          6
 7 A young child's Bible /                                                     4
 8 God's Kingdom :|stories from the New Testament /                            2
 9 Roman myths /                                                               4
10 Greek gods and goddesses /                                                 13
# ℹ 9,990 more rows</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># specify the variables you want to remove with a -</span></span>
<span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">books</span>, <span class="op">-</span><span class="va">location</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># reorder columns, combined with everything()</span></span>
<span><span class="va">booksReordered</span> <span class="op">&lt;-</span> <span class="fu">select</span><span class="op">(</span><span class="va">books</span>, <span class="va">title</span>, <span class="va">tot_chkout</span>, <span class="va">loutdate</span>, <span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div id="tips" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tips" class="callout-inner">
<h3 class="callout-title">Tips:</h3>
<div class="callout-content">
<p>If your variable name has spaces, use `` to close the variable:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">select</span><span class="op">(</span><span class="va">df</span>, <span class="op">-</span><span class="va">`my variable`</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>Error in UseMethod("select"): no applicable method for 'select' applied to an object of class "function"</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="ordering-data-with-arrange">Ordering data with <code>arrange()</code>
<a class="anchor" aria-label="anchor" href="#ordering-data-with-arrange"></a>
</h2>
<hr class="half-width">
<p>The <code>arrange()</code> function in the <code>dplyr</code> package
allows you to sort your data by alphabetical or numerical order.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">booksTitleArrange</span> <span class="op">&lt;-</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">books</span>, <span class="va">title</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use desc() to sort a variable in descending order</span></span>
<span><span class="va">booksHighestChkout</span> <span class="op">&lt;-</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">books</span>, <span class="fu">desc</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">booksHighestChkout</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 10,000 × 11
   callnumber title author tot_chkout loutdate subject isbn  callnumber2 pubyear
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;
 1 E Cro 2000 Clic… by Do…        113 01-23-2… Cows -… 0689… E Cro 2000  2000
 2 PZ7.W6367… The … by Da…        106 03-07-2… Pigs -… 0618… 398.2452 W… 2001
 3 &lt;NA&gt;       Cook… Janet…        103 03-13-2… Cake -… 0152… E Ste 1999  1999
 4 PZ7.D5455… Beca… Kate …         79 03-27-2… Dogs -… 0763… Fic Dic 20… 2000
 5 PZ7.C6775… Upto… Bryan…         69 02-05-2… Harlem… 9780… E Col 2000  2000
 6 &lt;NA&gt;       &lt;NA&gt;  &lt;NA&gt;           64 08-23-2… &lt;NA&gt;    &lt;NA&gt;  #1  ENC. C… &lt;NA&gt;
 7 F379.N59 … Thro… Ruby …         63 11-01-2… Bridge… 0590… 920 Bri 19… 1999
 8 PZ7.C9413… Bud,… Chris…         63 04-03-2… Runawa… 0385… Fic Cur 19… 1999
 9 E Mar 1992 Brow… by Bi…         61 02-16-2… Color … 0805… E Mar 1992  1992
10 PZ7.P338 … A ye… Richa…         47 03-26-2… Grandm… 0803… Fic Pec 20… 2000
# ℹ 9,990 more rows
# ℹ 2 more variables: format &lt;chr&gt;, subCollection &lt;chr&gt;</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># order data based on multiple variables (e.g. sort first by checkout, then by publication year)</span></span>
<span><span class="va">booksChkoutYear</span> <span class="op">&lt;-</span> <span class="fu">arrange</span><span class="op">(</span><span class="va">books</span>, <span class="fu">desc</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span>, <span class="fu">desc</span><span class="op">(</span><span class="va">pubyear</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="creating-new-variables-with-mutate">Creating new variables with <code>mutate()</code>
<a class="anchor" aria-label="anchor" href="#creating-new-variables-with-mutate"></a>
</h2>
<hr class="half-width">
<p>The <code>mutate()</code> function allows you to create new
variables. Here, we use the <code>str_sub()</code> function from the
<code>stringr</code> package to extract the first character of the
<code>callnumber</code> variable (the call number class) and put it into
a new column called <code>call_class</code>.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">booksLC</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">books</span>,</span>
<span>                  call_class <span class="op">=</span> <span class="fu">str_sub</span><span class="op">(</span><span class="va">callnumber</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>There are two numbers because you must specify a start and an end
value–here, we start with the first character, and end with the first
character.</p>
<p><code>mutate()</code> is also helpful to coerce a column from one
data type to another. For example, we can see there are some errors in
the <code>pubyear</code> variable–some dates are <code>19zz</code> or
<code>uuuu</code>. As a result, this variable was read in as a
<code>character</code> rather than an <code>integer</code>.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span> <span class="op">&lt;-</span> <span class="fu">mutate</span><span class="op">(</span><span class="va">books</span>, pubyear <span class="op">=</span> <span class="fu">as.integer</span><span class="op">(</span><span class="va">pubyear</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: There was 1 warning in `mutate()`.
ℹ In argument: `pubyear = as.integer(pubyear)`.
Caused by warning:
! NAs introduced by coercion</code></pre>
</div>
<p>We see the error message <code>NAs introduced by coercion</code>.
This is because non-numerical variables become <code>NA</code> and the
remainder become integers.</p>
</section><section><h2 class="section-heading" id="putting-it-all-together-with">Putting it all together with %&gt;%<a class="anchor" aria-label="anchor" href="#putting-it-all-together-with"></a>
</h2>
<hr class="half-width">
<p>The <a href="https://www.datacamp.com/community/tutorials/pipe-r-tutorial" class="external-link">Pipe
Operator</a> <code>%&gt;%</code> is loaded with the
<code>tidyverse</code>. It takes the output of one statement and makes
it the input of the next statement. You can think of it as “then” in
natural language. So instead of making a bunch of intermediate data
frames and cluttering up your workspace, you can run multiple functions
at once. You can type the pipe with <kbd>Ctrl</kbd> + <kbd>Shift</kbd> +
<kbd>M</kbd> if you have a PC or <kbd>Cmd</kbd> + <kbd>Shift</kbd> +
<kbd>M</kbd> if you have a Mac.</p>
<p>So in the following example, the <code>books</code> tibble is first
called, then the <code>format</code> is filtered to include only
<code>book</code>, then only the <code>title</code> and
<code>tot_chkout</code> columns are selected, and finally the data is
rearranged from most to least checkouts.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myBooks</span> <span class="op">&lt;-</span> <span class="va">books</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">format</span> <span class="op">==</span> <span class="st">"book"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">title</span>, <span class="va">tot_chkout</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">myBooks</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 6,983 × 2
   title                                      tot_chkout
   &lt;chr&gt;                                           &lt;dbl&gt;
 1 Click, clack, moo :|cows that type /              113
 2 The three pigs /                                  106
 3 Cook-a-doodle-doo! /                              103
 4 Because of Winn-Dixie /                            79
 5 Uptown /                                           69
 6 Through my eyes /                                  63
 7 Bud, not Buddy /                                   63
 8 Brown bear, brown bear, what do you see? /         61
 9 A year down yonder /                               47
10 Wemberly worried /                                 43
# ℹ 6,973 more rows</code></pre>
</div>
<div id="exercise-playing-with-pipes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-playing-with-pipes" class="callout-inner">
<h3 class="callout-title">Exercise: Playing with pipes
<code>%&gt;%</code>
</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Create a new data frame <code>booksKids</code> with these
conditions:</li>
</ol>
<ul>
<li>
<code>filter()</code> to include <code>subCollection</code> juvenile
&amp; k-12 materials and <code>format</code> books.</li>
<li>
<code>select()</code> only title, call number, total checkouts, and
publication year</li>
<li>
<code>arrange()</code> by total checkouts in descending order</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Use <code>mean()</code> to check the average number of checkouts for
the <code>booksKids</code> data frame.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">booksKids</span> <span class="op">&lt;-</span> <span class="va">books</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">subCollection</span> <span class="op">%in%</span> <span class="fu">c</span><span class="op">(</span><span class="st">"juvenile"</span>, <span class="st">"k-12 materials"</span><span class="op">)</span>,</span>
<span>  <span class="va">format</span> <span class="op">==</span> <span class="st">"book"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span><span class="fu">select</span><span class="op">(</span><span class="va">title</span>, <span class="va">callnumber</span>, <span class="va">tot_chkout</span>, <span class="va">pubyear</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span><span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">mean</span><span class="op">(</span><span class="va">booksKids</span><span class="op">$</span><span class="va">tot_chkout</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] 9.336331</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="split-apply-combine-and-the-summarize-function">Split-apply-combine and the <code>summarize()</code> function<a class="anchor" aria-label="anchor" href="#split-apply-combine-and-the-summarize-function"></a>
</h3>
<p>Many data analysis tasks can be approached using the
<em>split-apply-combine</em> paradigm: split the data into groups, apply
some analysis to each group, and then combine the results.
<strong><code>dplyr</code></strong> makes this very easy through the use
of the <code>group_by()</code> function.</p>
<p><br></p>
<div class="section level4">
<h4 id="the-summarize-function">The <code>summarize()</code> function<a class="anchor" aria-label="anchor" href="#the-summarize-function"></a>
</h4>
<p><code>group_by()</code> is often used together with
<code>summarize()</code>, which collapses each group into a single-row
summary of that group. <code>group_by()</code> takes as arguments the
column names that contain the <strong>categorical</strong> variables for
which you want to calculate the summary statistics.</p>
<p>So to compute the average checkouts by format:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">format</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>mean_checkouts <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 10 × 2
   format       mean_checkouts
   &lt;chr&gt;                 &lt;dbl&gt;
 1 book                3.23
 2 cd-rom              0.333
 3 database            0
 4 e-gov doc           0.0402
 5 image               0.0275
 6 kit/object          1.33
 7 map                10.6
 8 microform           0.00122
 9 online video        0
10 serial              0      </code></pre>
</div>
<p>Books and maps have the highest, and as we would expect, databases,
online videos, and serials have zero checkouts.</p>
<p>Here is a more complex example:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">format</span> <span class="op">==</span> <span class="st">"book"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>call_class <span class="op">=</span> <span class="fu">str_sub</span><span class="op">(</span><span class="va">callnumber</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">call_class</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>count <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>            sum_tot_chkout <span class="op">=</span> <span class="fu">sum</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">sum_tot_chkout</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 34 × 3
   call_class count sum_tot_chkout
   &lt;chr&gt;      &lt;int&gt;          &lt;dbl&gt;
 1 E            487           3114
 2 &lt;NA&gt;         459           3024
 3 H           1142           2902
 4 P            800           2645
 5 F            240           1306
 6 Q            333           1305
 7 B            426           1233
 8 R            193            981
 9 L            358            862
10 5             60            838
# ℹ 24 more rows</code></pre>
</div>
<p>Let’s break this down step by step:</p>
<ul>
<li>First we call the <code>books</code> data frame</li>
<li>We then pipe through <code>filter()</code> to include only
books</li>
<li>We then create a new column with <code>mutate()</code> called
<code>call_class</code> by using the <code>str_sub()</code> function to
keep the first character of the <code>call_number</code> variable</li>
<li>We then <code>group_by()</code> our newly created
<code>call_class</code> variable</li>
<li>We then create two summary columns by using <code>summarize()</code>
<ul>
<li>take the number <code>n()</code> of items per
<code>call_class</code> and assign it to a column called
<code>count</code>
</li>
<li>take the the <code>sum()</code> of <code>tot_chkout</code> per
<code>call_class</code> and assign the result to a column called
<code>sum_tot_chkout</code>
</li>
</ul>
</li>
<li>Finally, we arrange <code>sum_tot_chkout</code> in descending order,
so we can see the class with the most total checkouts. We can see it is
the <code>E</code> class (History of America), followed by
<code>NA</code> (items with no call number data), followed by
<code>H</code> (Social Sciences) and <code>P</code> (Language and
Literature).</li>
</ul>
<p><br></p>
</div>
</div>
<div class="section level3">
<h3 id="pattern-matching">
<strong>Pattern matching</strong><a class="anchor" aria-label="anchor" href="#pattern-matching"></a>
</h3>
<p>Cleaning text with the <code>stringr</code> package is easier when
you have a basic understanding of ‘regex’, or regular expression pattern
matching. Regex is especially useful for manipulating strings
(alphanumeric data), and is the backbone of search-and-replace
operations in most applications. Pattern matching is common to all
programming languages but regex syntax is often code-language specific.
Below, find an example of using pattern matching to find and replace
data in R:</p>
<ol style="list-style-type: decimal">
<li>Remove the trailing slash in the title column</li>
<li>Modify the punctuation separating the title from a subtitle</li>
</ol>
<p>Note: If the final product of this data will be imported into an ILS,
you may not want to alter the MARC specific punctuation. All other
audiences will appreciate the text normalizing steps.</p>
<p>Read more about <a href="https://r4ds.had.co.nz/strings.html#matching-patterns-with-regular-expressions" class="external-link">matching
patterns with regular expressions</a>.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>title_modified <span class="op">=</span> <span class="fu">str_remove</span><span class="op">(</span><span class="va">title</span>, <span class="st">"/$"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>     <span class="co"># remove the trailing slash</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>title_modified <span class="op">=</span> <span class="fu">str_replace</span><span class="op">(</span><span class="va">title_modified</span>, <span class="st">"\\s:\\|"</span>, <span class="st">": "</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>   <span class="co"># replace ' :|' with ': '</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">title_modified</span>, <span class="va">title</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code># A tibble: 10,000 × 2
   title_modified                                                          title
   &lt;chr&gt;                                                                   &lt;chr&gt;
 1 "Bermuda Triangle "                                                     Berm…
 2 "Invaders from outer space: real-life stories of UFOs "                 Inva…
 3 "Down Cut Shin Creek: the pack horse librarians of Kentucky "           Down…
 4 "The Chinese book of animal powers "                                    The …
 5 "Judge Judy Sheindlin's Win or lose by how you choose! "                Judg…
 6 "Judge Judy Sheindlin's You can't judge a book by its cover: cool rule… Judg…
 7 "A young child's Bible "                                                A yo…
 8 "God's Kingdom: stories from the New Testament "                        God'…
 9 "Roman myths "                                                          Roma…
10 "Greek gods and goddesses "                                             Gree…
# ℹ 9,990 more rows</code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="exporting-data">Exporting data<a class="anchor" aria-label="anchor" href="#exporting-data"></a>
</h2>
<hr class="half-width">
<p>Now that you have learned how to use
<strong><code>dplyr</code></strong> to extract information from or
summarize your raw data, you may want to export these new data sets to
share them with your collaborators or for archival.</p>
<p>Similar to the <code>read_csv()</code> function used for reading CSV
files into R, there is a <code>write_csv()</code> function that
generates CSV files from data frames.</p>
<p>We have previously created the directory <code>data_output</code>
which we will use to store our generated dataset. It is good practice to
keep your input and output data in separate folders–the
<code>data</code> folder should only contain the raw, unaltered data,
and should be left alone to make sure we don’t delete or modify it.</p>
<p>In preparation for our next lesson on plotting, we are going to
create a version of the dataset with most of the changes we made above.
We will first read in the original, then make all the changes with
pipes.</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books_reformatted</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"./data/books.csv"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">rename</span><span class="op">(</span>title <span class="op">=</span> <span class="va">X245.ab</span>,</span>
<span>         author <span class="op">=</span> <span class="va">X245.c</span>,</span>
<span>         callnumber <span class="op">=</span> <span class="va">CALL...BIBLIO.</span>,</span>
<span>         isbn <span class="op">=</span> <span class="va">ISN</span>,</span>
<span>         pubyear <span class="op">=</span> <span class="va">X008.Date.One</span>,</span>
<span>         subCollection <span class="op">=</span> <span class="va">BCODE1</span>,</span>
<span>         format <span class="op">=</span> <span class="va">BCODE2</span>,</span>
<span>         location <span class="op">=</span> <span class="va">LOCATION</span>,</span>
<span>         tot_chkout <span class="op">=</span> <span class="va">TOT.CHKOUT</span>,</span>
<span>         loutdate <span class="op">=</span> <span class="va">LOUTDATE</span>,</span>
<span>         subject <span class="op">=</span> <span class="va">SUBJECT</span>,</span>
<span>         callnumber2 <span class="op">=</span> <span class="va">CALL...ITEM.</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>pubyear <span class="op">=</span> <span class="fu">as.integer</span><span class="op">(</span><span class="va">pubyear</span><span class="op">)</span>,</span>
<span>         call_class <span class="op">=</span> <span class="fu">str_sub</span><span class="op">(</span><span class="va">callnumber</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>         subCollection <span class="op">=</span> <span class="fu">recode</span><span class="op">(</span><span class="va">subCollection</span>,</span>
<span>                                <span class="st">"-"</span> <span class="op">=</span> <span class="st">"general collection"</span>,</span>
<span>                                u <span class="op">=</span> <span class="st">"government documents"</span>,</span>
<span>                                r <span class="op">=</span> <span class="st">"reference"</span>,</span>
<span>                                b <span class="op">=</span> <span class="st">"k-12 materials"</span>,</span>
<span>                                j <span class="op">=</span> <span class="st">"juvenile"</span>,</span>
<span>                                s <span class="op">=</span> <span class="st">"special collections"</span>,</span>
<span>                                c <span class="op">=</span> <span class="st">"computer files"</span>,</span>
<span>                                t <span class="op">=</span> <span class="st">"theses"</span>,</span>
<span>                                a <span class="op">=</span> <span class="st">"archives"</span>,</span>
<span>                                z <span class="op">=</span> <span class="st">"reserves"</span><span class="op">)</span>,</span>
<span>         format <span class="op">=</span> <span class="fu">recode</span><span class="op">(</span><span class="va">format</span>,</span>
<span>                         a <span class="op">=</span> <span class="st">"book"</span>,</span>
<span>                         e <span class="op">=</span> <span class="st">"serial"</span>,</span>
<span>                         w <span class="op">=</span> <span class="st">"microform"</span>,</span>
<span>                         s <span class="op">=</span> <span class="st">"e-gov doc"</span>,</span>
<span>                         o <span class="op">=</span> <span class="st">"map"</span>,</span>
<span>                         n <span class="op">=</span> <span class="st">"database"</span>,</span>
<span>                         k <span class="op">=</span> <span class="st">"cd-rom"</span>,</span>
<span>                         m <span class="op">=</span> <span class="st">"image"</span>,</span>
<span>                         <span class="st">"5"</span> <span class="op">=</span> <span class="st">"kit/object"</span>,</span>
<span>                         <span class="st">"4"</span> <span class="op">=</span> <span class="st">"online video"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>This chunk of code read the CSV, renamed the variables, used
<code>mutate()</code> in combination with <code>recode()</code> to
recode the <code>format</code> and <code>subCollection</code> values,
used <code>mutate()</code> in combination with <code>as.integer()</code>
to coerce <code>pubyear</code> to integer, and used
<code>mutate()</code> in combination with <code>str_sub</code> to create
the new varable <code>call_class</code>.</p>
<p>We now write it to a CSV and put it in the <code>data/output</code>
sub-directory:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">write_csv</span><span class="op">(</span><span class="va">books_reformatted</span>, <span class="st">"./data_output/books_reformatted.csv"</span><span class="op">)</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="help-with-dplyr">Help with dplyr<a class="anchor" aria-label="anchor" href="#help-with-dplyr"></a>
</h2>
<hr class="half-width">
<ul>
<li>Read more about <code>dplyr</code> at <a href="https://dplyr.tidyverse.org/" class="external-link">https://dplyr.tidyverse.org/</a>.</li>
<li>In your console, after loading <code><a href="https://dplyr.tidyverse.org" class="external-link">library(dplyr)</a></code>, run
<code><a href="https://dplyr.tidyverse.org/articles/dplyr.html" class="external-link">vignette("dplyr")</a></code> to read an extremely helpful explanation
of how to use it.</li>
<li>See the <a href="%22Data%20Transformation%22%20chapter">http://r4ds.had.co.nz/transform.html</a>
in Garrett Grolemund and Hadley Wickham’s book <em>R for Data
Science.</em>
</li>
<li>Watch this Data School video: <a href="Hands-on%20dplyr%20tutorial%20for%20faster%20data%20manipulation%20in%20R.">https://www.youtube.com/watch?v=jWjqLW-u3hc</a>
</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use the <code>dplyr</code> package to manipulate dataframes.</li>
<li>Subset data frames using <code>select()</code> and
<code>filter()</code>.</li>
<li>Rename variables in a data frame using <code>rename()</code>.</li>
<li>Recode values in a data frame using <code>recode()</code>.</li>
<li>Use <code>mutate()</code> to create new variables.</li>
<li>Sort data using <code>arrange()</code>.</li>
<li>Use <code>group_by()</code> and <code>summarize()</code> to work
with subsets of data.</li>
<li>Use pipe (<code>%&gt;%</code>) to combine multiple commands.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-04-data-viz-ggplot"><p>Content from <a href="04-data-viz-ggplot.html">Data Visualisation with ggplot2</a></p>
<hr>
<p>Last updated on 2025-06-03 |

        <a href="https://github.com/librarycarpentry/lc-r/edit/main/episodes/04-data-viz-ggplot.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are the components of a ggplot?</li>
<li>How do I create scatterplots, boxplots, and barplots?</li>
<li>How can I change the aesthetics (ex. colour, transparency) of my
plot?</li>
<li>How can I create multiple plots at once?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand the basic syntax of the <code>ggplot</code>
function.</li>
<li>Produce scatter plots, boxplots, and time series plots using
ggplot.</li>
<li>Set universal plot settings.</li>
<li>Describe what faceting is and apply faceting in ggplot.</li>
<li>Modify the aesthetics of an existing ggplot plot (including axis
labels and color).</li>
<li>Build complex and customized plots from data in a data frame.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="getting-set-up">Getting set up<a class="anchor" aria-label="anchor" href="#getting-set-up"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="set-up-your-directories-and-data">
<strong>Set up your directories and data</strong><a class="anchor" aria-label="anchor" href="#set-up-your-directories-and-data"></a>
</h3>
<p>If you have not already done so, open your R Project file
(<code>library_carpentry.Rproj</code>) created in the
<code>Before We Start</code> lesson. Ensure that you have the following
sub-directories in your Rproj: <code>data\</code>,
<code>data_output\</code> and <code>fig_output\</code>.</p>
<p>Run the following code chunk to create the sub-directories and
download the dataset.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">fs</span><span class="op">)</span>   <span class="co"># https://fs.r-lib.org/.  fs is a cross-platform, uniform interface to file system operations via R. </span></span>
<span><span class="fu">dir_create</span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu">dir_create</span><span class="op">(</span><span class="st">"data_output"</span><span class="op">)</span></span>
<span><span class="fu">dir_create</span><span class="op">(</span><span class="st">"fig_output"</span><span class="op">)</span></span>
<span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://ndownloader.figshare.com/files/22031487"</span>,</span>
<span>              <span class="st">"data/books.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span>
<span><span class="fu">download.file</span><span class="op">(</span><span class="st">"https://ndownloader.figshare.com/files/22051506"</span>,</span>
<span>              <span class="st">"data_output/books_reformatted.csv"</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span></code></pre>
</div>
<p>Then load the packages required for this lesson.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span>  <span class="co"># load the core tidyverse</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ purrr     1.0.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span>  <span class="co"># load lubridate</span></span></code></pre>
</div>
<p>The<code>lubridate</code> package is installed with the tidyverse,
but is not one of the core tidyverse packages loaded with
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code>, so it needs to be explicitly called.
<code>lubridate</code> makes working with dates and times easier in
R.</p>
<p>We also load the <code>books_reformatted</code> data we saved in the
previous lesson. Here, we’ll assign it to <code>books2</code>. You can
create the reformatted data by running the codes from <a href="https://librarycarpentry.github.io/lc-r/03-data-cleaning-and-transformation.html#exporting-data" class="external-link">here</a>
or by loading the saved CSV file from previous episode.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">books2</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data_output/books_reformatted.csv"</span><span class="op">)</span>  <span class="co"># load the data and assign it to books</span></span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="plotting-with-ggplot2">Plotting with <strong><code>ggplot2</code></strong>
<a class="anchor" aria-label="anchor" href="#plotting-with-ggplot2"></a>
</h2>
<hr class="half-width">
<p>Base R contains a number of functions for quick data visualization
such as <code>plot()</code> for scatter plots, <code>barplot()</code>,
<code>hist()</code> for histograms, and <code>boxplot()</code>. However,
just as data manipulation is easier with <code>dplyr</code> than Base R,
so data visualization is easier with <code>ggplot2</code> than Base R.
<code>ggplot2</code> is a <a href="https://vita.had.co.nz/papers/layered-grammar.html" class="external-link">“grammar” for
data visualization</a> also created by Hadley Wickham, as an
implementation of Leland Wilkinson’s <a href="https://www.worldcat.org/oclc/934513040" class="external-link">Grammar of
Graphics</a>.</p>
<p><code>ggplot</code> is a plotting package that makes it simple to
create complex plots from data stored in a data frame. It provides a
programmatic interface for specifying what variables to plot, how they
are displayed, and general visual properties. Therefore, we only need
minimal changes if the underlying data change or if we decide to change
from a bar plot to a scatterplot. This helps in creating publication
quality plots with minimal amounts of adjustments and tweaking.</p>
<div id="tips-on-plotting-with-ggplot2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tips-on-plotting-with-ggplot2" class="callout-inner">
<h3 class="callout-title">Tips on plotting with ggplot2:</h3>
<div class="callout-content">
<p><code>ggplot2</code> functions like data in the ‘long’ format, i.e.,
a column for every dimension, and a row for every observation.
Well-structured data will save you lots of time when making figures with
<code>ggplot2</code></p>
<p>ggplot graphics are built step by step by adding new elements. Adding
layers in this fashion allows for extensive flexibility and
customization of plots.</p>
</div>
</div>
</div>
<p>To build a ggplot, we will use the following basic template that can
be used for different types of plots:</p>
<pre><code>ggplot(data = &lt;DATA&gt;, mapping = aes(&lt;MAPPINGS&gt;)) +  &lt;GEOM_FUNCTION&gt;()</code></pre>
<ul>
<li>The <code>data</code> argument is used to bind the plot to a
specific data frame in <code>ggplot2</code>.</li>
<li>The <code>mapping</code> argument defines the variables mapped to
various aesthetics of the plot, e.g. the x and y axis.</li>
<li>The <code>geom_function</code> argument defines the type of plot,
e.g. barplot, scatter plot, boxplot.</li>
</ul>
<p>::::::::::::::::::::::::::::::::::::::::::::; callout</p>
</section><section><h2 class="section-heading" id="ggplot2-versus-ggplot">
<code>ggplot2</code> versus <code>ggplot</code>
<a class="anchor" aria-label="anchor" href="#ggplot2-versus-ggplot"></a>
</h2>
<hr class="half-width">
<p>People are sometimes confused between <code>ggplot2</code> and
<code>ggplot</code>. The former refers to the name of the package, while
the latter refers to the function that you run.</p>
<p>:::::::::::::::::::::::::::::::::::::::::</p>
<p>When you run the <code>ggplot()</code> function, it plots directly to
the Plots tab in the Navigation Pane (lower right). Alternatively, you
can assign a plot to an R object, then call <code>print()</code>to view
the plot in the Navigation Pane.</p>
</section><section><h2 class="section-heading" id="creating-your-first-plot">Creating your first plot<a class="anchor" aria-label="anchor" href="#creating-your-first-plot"></a>
</h2>
<hr class="half-width">
<p>Let’s create a <code>booksPlot</code> and limit our visualization to
only items in <code>subCollection</code> general collection, juvenile,
and k-12, and filter out items with <code>NA</code> in
<code>call_class</code>. We do this by using the <kbd>|</kbd> key on the
keyboard to specify a boolean OR, and use the <code>!is.na()</code>
function to keep only those items that are NOT <code>NA</code> in the
<code>call_class</code> column.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a new data frame</span></span>
<span><span class="va">booksPlot</span> <span class="op">&lt;-</span> <span class="va">books2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">subCollection</span> <span class="op">==</span> <span class="st">"general collection"</span> <span class="op">|</span> </span>
<span>           <span class="va">subCollection</span> <span class="op">==</span> <span class="st">"juvenile"</span> <span class="op">|</span> </span>
<span>           <span class="va">subCollection</span> <span class="op">==</span> <span class="st">"k-12 materials"</span>,</span>
<span>         <span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">call_class</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>To start with, we first bind our data to the <code>ggplot()</code>
function using the <code>data</code> argument.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksPlot</span><span class="op">)</span>  <span class="co"># a blank canvas</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-4-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>After running this code, a blank canvas is being created. Next, we
define a mapping aesthetic with the <code>mapping</code> argument (using
the aesthetic (<code>aes()</code>) function). This defines the variables
to be plotted and specifies how to present them in the graph, e.g. as
x/y positions or characteristics such as size, shape, color, etc.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksPlot</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span><span class="op">)</span><span class="op">)</span> <span class="co"># define the x axis aesthetic</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-5-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Here we define the x axes, but because we have not yet added any
<code>geoms</code>, we still do not see any data being visualized.</p>
</section><section><h2 class="section-heading" id="defining-the-geoms">Defining the <code>geoms</code>
<a class="anchor" aria-label="anchor" href="#defining-the-geoms"></a>
</h2>
<hr class="half-width">
<p>Data is visualized with different “geometric shapes” such as bars and
lines; what are called <em>geoms</em>. In your console, type
<code>geom_</code> and press the tab key to see the geoms included–there
are over 30. For example:</p>
<ul>
<li>
<code>geom_point()</code> for scatter plots, dot plots, etc.</li>
<li>
<code>geom_boxplot()</code> for boxplots</li>
<li>
<code>geom_bar()</code> for barplots</li>
<li>
<code>geom_line()</code> for trend lines, time series, etc.</li>
</ul>
<p>Each geom takes a <code>mapping</code> argument within the
<code>aes()</code> call. This is called the <em>aesthetic mapping
argument</em>. In other words, inside the geom function is an
<code>aes()</code> function, and inside <code>aes()</code> is a mapping
argument specifying how to map the variables inside the visualization.
ggplot then looks for that variable inside the data argument, and plots
it accordingly.</p>
<p>For example, in the below expression, the <code>call_class</code>
variable is being mapped to the <code>x</code> axis in the geometric
shape of a bar. In this example, the y axis (count) is not specified,
nor is it a variable in the original dataset, but is the result of
geom_bar() <em>binning</em> your data inside each call number class and
plotting the bin counts (the number of items falling into each bin).</p>
<p>To add a geom to the plot use the <code>+</code> operator.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add a bar geom and set call_class as the x axis</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksPlot</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-6-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We can see that there are about 1,500 books in the H class, 1,000
books in the P class, 700 books in the E class, etc. As we shall see,
the number of E and F books are deceptively large, as easy books and
fiction books both begin with E and are thus lumped into that category,
though they are not of the E and F Library of Congress call number
classification.</p>
<div id="ggplot-tips" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="ggplot-tips" class="callout-inner">
<h3 class="callout-title">
<code>ggplot</code> tips</h3>
<div class="callout-content">
<ul>
<li>Anything you put in the <code>ggplot()</code> function can be seen
by any geom layers that you add (i.e., these are universal plot
settings). This includes the x- and y-axis mapping you set up in
<code>aes()</code>.</li>
<li>You can also specify mappings for a given geom independently of the
mapping defined globally in the <code>ggplot()</code> function.</li>
<li>The <code>+</code> sign used to add new layers must be placed at the
end of the line containing the <em>previous</em> layer. If, instead, the
<code>+</code> sign is added at the beginning of the line containing the
new layer, <strong><code>ggplot2</code></strong> will not add the new
layer and will return an error message.</li>
</ul>
</div>
</div>
</div>
<p><br></p>
</section><section><h2 class="section-heading" id="applying-a-different-geom">
<strong>Applying a different geom</strong><a class="anchor" aria-label="anchor" href="#applying-a-different-geom"></a>
</h2>
<hr class="half-width">
<p>This same exact data can be visualized in a couple different ways by
replacing the geom_histogram() function with either
<code>geom_density()</code> (adding a logarithmic x scale) or
<code>geom_freqpoly()</code>:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a density plot</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksPlot</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_density</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_x_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in scale_x_log10(): log-10 transformation introduced infinite values.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2348 rows containing non-finite outside the scale range
(`stat_density()`).</code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-7-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a frequency polygon</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksPlot</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_freqpoly</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in scale_y_log10(): log-10 transformation introduced infinite values.</code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-7-2.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="univariate-and-bivariate-geoms">Univariate and bivariate geoms<a class="anchor" aria-label="anchor" href="#univariate-and-bivariate-geoms"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="univariate-geoms">
<strong>Univariate geoms</strong><a class="anchor" aria-label="anchor" href="#univariate-geoms"></a>
</h3>
<p><em>“Univariate”</em> refers to a single variable. A histogram is a
univariate plot: it shows the frequency counts of each value inside a
single variable. Let’s say we want to visualize a frequency distibution
of checkouts in the <code>booksPlot</code> data. In other words, how
many items have 1 checkout? How many have 2 checkouts? And so on.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksPlot</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-8-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>As we have seen in previous lessons, the overwhelming majority of
books have a small amount of usage, so the plot is heavily skewed. As
anyone who has done collection analysis has encountered, this is a very
common issue. It can be addressed in two ways:</p>
<p>First, add a <code>binwidth</code> argument to <code>aes()</code>. In
a histogram, each bin contains the number of occurrences of items in the
data set that are contained within that bin. As stated in the
documentation for <code>?geom_histogram</code>, “You should always
override this value, exploring multiple widths to find the best to
illustrate the stories in your data.”</p>
<p>Second, change the scales of the <code>y</code> axes by adding
another argument to ggplot:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksPlot</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_histogram</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning in scale_y_log10(): log-10 transformation introduced infinite values.</code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Removed 2 rows containing missing values or values outside the scale range
(`geom_bar()`).</code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-9-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Notice the scale y axis now goes from 0-10, 10-100, 100-1000, and
1000-10000. This is called “logarithmic scale” and is based on orders of
magnitude. We can therefore see that over 5,000 books (on the y axis)
have between 0-10 checkouts (on the x axis), 1,000 books have 10-20
checkouts, and further down on the x axis, a handful of books have 60-70
checkouts, and a handful more have around 100 checkouts.</p>
<p>We can check this with <code>table()</code>:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">table</span><span class="op">(</span><span class="va">booksPlot</span><span class="op">$</span><span class="va">tot_chkout</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>
   0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15
2348  875  638  464  362  282  199  146  118   97   84   50   41   46   40   33
  16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31
  17   20   26   17   14   12    7   15    7    8    6    6    3    3    2    4
  32   33   34   35   36   38   39   40   41   43   47   61   63   69   79  106
   1    5    4    3    2    2    3    1    1    1    1    1    2    1    1    1
 113
   1 </code></pre>
</div>
<p>ggplot has thus given us an easy way to visualize the distribution of
checkouts. If you test this on your own print and ebook usage data, you
will likely find something similar.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="bivariate-geoms">
<strong>Bivariate geoms</strong><a class="anchor" aria-label="anchor" href="#bivariate-geoms"></a>
</h3>
<p>Bivariate plots visualize two variables. Let’s take a look at some
higher usage items, but first eliminate the <code>NA</code> values and
keep only items with more than 10 checkouts, which we will do with
<code>filter()</code> from the <code>dplyr</code> package and assign it
to <code>booksHighUsage</code>.</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter booksPlot to include only items with over 10 checkouts</span></span>
<span><span class="va">booksHighUsage</span> <span class="op">&lt;-</span> <span class="va">booksPlot</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span>,</span>
<span>                <span class="va">tot_chkout</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<p>We then visualize checkouts by call number with a scatter plot. There
is still so much skew that I retain the logarithmic scale on the y axis
with <code>scale_y_log10()</code>.</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># scatter plot high usage books by call number class</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>,</span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span>, y <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-12-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Again, notice the scale on the y axis. We can obseve a few items of
interest here: No items in the D, J, M, and Z class have more than 30
checkouts. An item in the E class has the most checkouts with over 100,
but, as noted above, this includes Easy books classified with
<code>E</code>, not just items with Library of Congress <code>E</code>
classification (United States history) an issue we’ll look at further
down.</p>
<p>Just as with univariate plots, we can use different geoms to view
various aspects of the data, which in turn reveal different
patterns.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># boxplot plot high usage books by call number class</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>,</span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span>, y <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-13-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>By adding points to a boxplot, we can have a better idea of the
number of measurements and of their distribution. Here we set the
boxplot <code>alpha</code> to <code>0</code>, which will make it
see-through. We also add another layer of geom to the plot called
<code>geom_jitter()</code>, which will introduce a little bit of
randomness into the position of our points. We set the
<code>color</code> of these points to <code>"tomato"</code>.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span>, y <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_boxplot</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, color <span class="op">=</span> <span class="st">"tomato"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-boxplot-with-points-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Notice how the boxplot layer is behind the jitter layer? What do you
need to change in the code to put the boxplot in front of the points
such that it’s not hidden?</p>
<div id="plotting-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-exercise" class="callout-inner">
<h3 class="callout-title">Plotting Exercise</h3>
<div class="callout-content">
<p>Boxplots are useful summaries, but hide the <em>shape</em> of the
distribution. For example, if the distribution is bimodal, we would not
see it in a boxplot. An alternative to the boxplot is the violin plot,
where the shape (of the density of points) is drawn.</p>
<ul>
<li>Replace the box plot with a violin plot; see
<code>geom_violin()</code>.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span>, y <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_violin</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_jitter</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, color <span class="op">=</span> <span class="st">"tomato"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.</code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-violin-plot-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="plotting-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-exercise" class="callout-inner">
<h3 class="callout-title">Plotting Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<ul>
<li>Add color to the <code>geom_jitter</code> argument on your boxplot
according to the item <code>subCollection</code>. <em>Hint:</em> If you
get the error <code>object 'subCollection' not found</code> or
<code>invalid color name 'subCollection'</code> then consider
<code>color</code> as an aesthetic mapping.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span>, y <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_violin</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_jitter</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, <span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">WARNING<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="warning" tabindex="0"><code>Warning: Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.
Groups with fewer than two datapoints have been dropped.
ℹ Set `drop = FALSE` to consider such groups for position adjustment purposes.</code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-boxplot-exercise-subcollection-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<div id="plotting-exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="plotting-exercise" class="callout-inner">
<h3 class="callout-title">Plotting Exercise<em> (continued)</em>
</h3>
<div class="callout-content">
<p>So far, we’ve looked at the distribution of checkouts within call
number ranges. Try making a new plot to explore the distribution of
checkouts within another variable.</p>
<ul>
<li>Still using the <code>booksHighUsage</code> data, create a boxplot
for <code>tot_chkout</code> for each <code>subCollection</code>. Overlay
the boxplot layer on a jitter layer to show actual measurements. Keep
the <code>scale_y_log10</code> argument.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">subCollection</span>, y <span class="op">=</span> <span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_boxplot</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_jitter</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, color <span class="op">=</span> <span class="st">"tomato"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-14-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="add-a-third-variable">Add a third variable<a class="anchor" aria-label="anchor" href="#add-a-third-variable"></a>
</h2>
<hr class="half-width">
<p>As we saw in that exercise, you can convey even more information in
your visualization by adding a third variable, in addition to the first
two on the x and y scales.</p>
<p>We can use arguments in <code>aes()</code> to map a visual aesthetic
in the plot to a variable in the dataset. Specifically, we will map
<code>color</code> to the <code>subCollection</code> variable. Because
we are now mapping features of the data to a color, instead of setting
one color for all points, the color now needs to be set inside a call to
the <strong><code>aes</code></strong> function.
<strong><code>ggplot2</code></strong> will provide a different color
corresponding to different values in the vector. In other words,
associate the name of the aesthetic (<code>color</code>) to the name of
the variable (<code>subCollection</code>) inside <code>aes()</code>:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>,</span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span>,</span>
<span>           y <span class="op">=</span> <span class="va">tot_chkout</span>,</span>
<span>           color <span class="op">=</span> <span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-15-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p><code>ggplot()</code> automatically assigns a unique level of the
aesthetic to each unique value of the variable (this is called
<em>scaling</em>). Now we reveal indeed that youth materials make up a
large number of high usage items in both the E and the P class.</p>
<p>Use <code>fill()</code> with <code>geom_bar()</code> to create a
stacked bar plot to visualize frequency. Again, this reinforced the fact
that most of the <code>E</code> and <code>P</code> classification are
youth materials.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">subCollection</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-16-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Stacked bar charts are generally more difficult to read than
side-by-side bars. We can separate the portions of the stacked bar that
correspond to each village and put them side-by-side by using the
<code>position</code> argument for <code>geom_bar()</code> and setting
it to “dodge”.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">call_class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">subCollection</span><span class="op">)</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-barplot-dodge-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>The order of the classification scale is sorted for “library order.”
The audience of library professionals typically prefer an alphabetical
arrangement. However, the x-axis variable is actually categorical.
Categorical data are easier to read when the bars are sorted by
frequency. An easy way to sort by frequency is to use the
<code>fct_infreq()</code> function from the <code>forcats</code>
library.</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">call_class</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-17-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Another visualization issue is labeling. In many cultures, long
labels are easier to read horizontally. Our goal is to flip the x-axis
and reorient the x-axis labels into a horizontal presentation. To
accomplish this, flip the axis coordinates with the
<code>coord_flip()</code> function. When we flip the axes it’s important
to reverse the sorted categorical order. Do this with
<code>forcats::fct_rev()</code>.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">booksHighUsage</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">fct_rev</span><span class="op">(</span><span class="fu">fct_infreq</span><span class="op">(</span><span class="va">call_class</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-18-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="plotting-time-series-data">Plotting time series data<a class="anchor" aria-label="anchor" href="#plotting-time-series-data"></a>
</h2>
<hr class="half-width">
<p>Let’s calculate number of counts per year for each format for items
published after 1990 and before 2002 in the <code>booksHighUsage</code>
data frame created above.</p>
<p>First, we use the <code>ymd()</code> function from the
<code>lubridate</code> package to convert our publication year into a
<em>POSIXct</em> object. Pass the <code>truncated = 2</code> argument as
a way to indicate that the <code>pubyear</code> column does not contain
month or day. This means <code>1990</code> becomes
<code>1990-01-01</code>. This will allow us to plot the number of books
per year.</p>
<p>We will do this by calling <code>mutate()</code> to create a new
variable <code>pubyear_ymd</code>.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">booksPlot</span> <span class="op">&lt;-</span> <span class="va">booksPlot</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>pubyear_ymd <span class="op">=</span> <span class="fu">ymd</span><span class="op">(</span><span class="va">pubyear</span>, truncated <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>  <span class="co"># convert pubyear to a Date object with ymd()</span></span>
<span></span>
<span><span class="fu">class</span><span class="op">(</span><span class="va">booksPlot</span><span class="op">$</span><span class="va">pubyear</span><span class="op">)</span>  <span class="co"># integer</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "numeric"</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">class</span><span class="op">(</span><span class="va">booksPlot</span><span class="op">$</span><span class="va">pubyear_ymd</span><span class="op">)</span>  <span class="co"># Date</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "Date"</code></pre>
</div>
<p>Next, we can use <code>filter</code> to remove the <code>NA</code>
values and get books published between 1990 and 2003. Notice that we use
the <code>&amp;</code> as an AND operator to indicate that the date must
fall between that range. We then need to group the data and count
records within each group.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yearly_counts</span> <span class="op">&lt;-</span> <span class="va">booksPlot</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">pubyear_ymd</span><span class="op">)</span>,</span>
<span>         <span class="va">pubyear_ymd</span> <span class="op">&gt;</span> <span class="st">"1989-01-01"</span> <span class="op">&amp;</span> <span class="va">pubyear_ymd</span> <span class="op">&lt;</span> <span class="st">"2002-01-01"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">pubyear_ymd</span>, <span class="va">subCollection</span><span class="op">)</span></span></code></pre>
</div>
<p>Time series data can be visualized as a line plot with years on the x
axis and counts on the y axis:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-first-time-series-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Unfortunately, this does not work because we plotted data for all the
sub-collections together. We need to tell ggplot to draw a line for each
sub-collection by modifying the aesthetic function to include
<code>group = subCollection</code>:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span>, group <span class="op">=</span> <span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-21-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We will be able to distinguish sub-collections in the plot if we add
colors (using <code>color</code> also automatically groups the
data):</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span>, color <span class="op">=</span> <span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-time-series-with-colors-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div class="section level3">
<h3 id="faceting">Faceting<a class="anchor" aria-label="anchor" href="#faceting"></a>
</h3>
<p>Rather than creating a single plot with side-by-side bars for each
sub-collection, we may want to create multiple plots, where each plot
shows the data for a single sub-collection. This would be especially
useful if we had a large number of sub-collections that we had sampled,
as a large number of side-by-side bars will become more difficult to
read.</p>
<p><strong><code>ggplot2</code></strong> has a special technique called
<em>faceting</em> that allows the user to split one plot into multiple
plots based on a factor included in the dataset.</p>
<p>There are two types of <code>facet</code> functions:</p>
<ul>
<li>
<code>facet_wrap()</code> arranges a one-dimensional sequence of
panels to allow them to cleanly fit on one page.</li>
<li>
<code>facet_grid()</code> allows you to form a matrix of rows and
columns of panels.</li>
</ul>
<p>Both geometries allow to to specify faceting variables specified
within <code>vars()</code>. For example,
<code>facet_wrap(facets = vars(facet_variable))</code> or
<code>facet_grid(rows = vars(row_variable), cols = vars(col_variable))</code>.</p>
<p>Here we use <code>facet_wrap()</code> to make a time series plot for
each subCollection:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">facet_wrap</span><span class="op">(</span>facets <span class="op">=</span> <span class="fu">vars</span><span class="op">(</span><span class="va">subCollection</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-first-facet-1.png" alt="Three line plots, one each for general collection, juvenile, and K-12 sub-collection materials, showing the relationship of count of books to publication year" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>We can use <code>facet_wrap()</code> as a way of seeing the
categories within a variables. Look at the number of formats per
sub-collection.</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">books2</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu">fct_rev</span><span class="op">(</span><span class="fu">fct_infreq</span><span class="op">(</span><span class="va">subCollection</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">format</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_flip</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Library subcollection"</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-22-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>While this may not be the most beautiful plot, these kinds of
exercises can be helpful for data exploration. We learn that there are
books in all sub-collections; there are CD-ROMS, serials, images, and
microforms in government documents, and so on. Exploratory plots
visually surface information about your data that are otherwise
difficult to parse. Sometimes they may not meet all the rules for
creating beautiful data, but when you are simply getting to know your
data, that’s OK.</p>
<div id="challenge" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge" class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Use the <code>books2</code> data to create a bar plot that depicts
the number of items in each sub-collection, faceted by format. Add the
scale_y_log10() argument to create a logarithmic scale for easier
visibility. Add the following theme argument to tilt the axis text
diagonal:
<code>theme(axis.text.x = element_text(angle = 60, hjust = 1))</code></p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">books2</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">facet_wrap</span><span class="op">(</span><span class="fu">vars</span><span class="op">(</span><span class="va">format</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">scale_y_log10</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">60</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-average-weight-time-series-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="ggplot2-themes">
<strong><code>ggplot2</code></strong> themes<a class="anchor" aria-label="anchor" href="#ggplot2-themes"></a>
</h2>
<hr class="half-width">
<p>Usually plots with white background look more readable when printed.
Every single component of a <code>ggplot</code> graph can be customized
using the generic <code>theme()</code> function. However, there are
pre-loaded themes available that change the overall appearance of the
graph without much effort.</p>
<p>For example, we can change our graph to have a simpler white
background using the <code>theme_bw()</code> function:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span>facets <span class="op">=</span> <span class="fu">vars</span><span class="op">(</span><span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-23-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>In addition to <code>theme_bw()</code>, which changes the plot
background to white, <strong><code>ggplot2</code></strong> comes with
several other themes which can be useful to quickly change the look of
your visualization. The complete list of themes is available at <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">https://ggplot2.tidyverse.org/reference/ggtheme.html</a>.
<code>theme_minimal()</code> and <code>theme_light()</code> are popular,
and <code>theme_void()</code> can be useful as a starting point to
create a new hand-crafted theme.</p>
<p>The <a href="https://jrnold.github.io/ggthemes/reference/index.html" class="external-link">ggthemes</a>
package provides a wide variety of options. The <a href="https://exts.ggplot2.tidyverse.org/" class="external-link"><strong><code>ggplot2</code></strong>
extensions website</a> provides a list of packages that extend the
capabilities of <strong><code>ggplot2</code></strong>, including
additional themes.</p>
</section><section><h2 class="section-heading" id="customization">Customization<a class="anchor" aria-label="anchor" href="#customization"></a>
</h2>
<hr class="half-width">
<p>Take a look at the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-visualization-2.1.pdf" class="external-link"><strong><code>ggplot2</code></strong>
cheat sheet</a>, and think of ways you could improve your plots.</p>
<p>For example, by default, the axes labels on a plot are determined by
the name of the variable being plotted. We can change names of axes to
something more informative than ‘pubyear_ymd’ and ‘n’ and add a title to
the figure:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add labels</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span>facets <span class="op">=</span> <span class="fu">vars</span><span class="op">(</span><span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of High Usage Books per Year of Publication, by Sub-Collection"</span>,</span>
<span>        x <span class="op">=</span> <span class="st">"Year of publication"</span>,</span>
<span>        y <span class="op">=</span> <span class="st">"Number of books"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-24-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Note that it is also possible to change the fonts of your plots. If
you are on Windows, you may have to install the <a href="https://github.com/wch/extrafont" class="external-link"><strong><code>extrafont</code></strong>
package</a>, and follow the instructions included in the README for this
package.</p>
<p>You can also assign a <code>theme</code> to an object in your
environment, and pass that theme to your plot. This can be helpful to
keep your <code>ggplot()</code> calls less cluttered. Here we create a
<code>gray_theme</code> :</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create the gray theme</span></span>
<span><span class="va">gray_theme</span> <span class="op">&lt;-</span> <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray20"</span>, size <span class="op">=</span> <span class="fl">12</span>, angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">0.5</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>                    axis.text.y <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>color <span class="op">=</span> <span class="st">"gray20"</span>, size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>                    text <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span><span class="op">)</span>,</span>
<span>                    plot.title <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># pass the gray theme to a plot</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span>facets <span class="op">=</span> <span class="fu">vars</span><span class="op">(</span><span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">gray_theme</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of High Usage Books per Year of Publication, \n by Sub-Collection"</span>,</span>
<span>        x <span class="op">=</span> <span class="st">"Year of publication"</span>,</span>
<span>        y <span class="op">=</span> <span class="st">"Number of books"</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-25-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><div id="challenge-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1" class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Use the <code>booksPlot</code> data to create a plot that depicts how
the total number of checkouts changes based on year of publication.</p>
<p>First, create a data frame <code>yearly_checkouts</code> That meets
the following conditions:</p>
<ul>
<li>
<code>filter()</code> to exclude <code>NA</code> values</li>
<li>
<code>filter()</code> between “1989-01-01” and “2002-01-01”</li>
<li>
<code>group_by()</code> the publication year (make sure to use the
special Date pubyear value we created)</li>
<li>
<code>summarize()</code> to create a new value
<code>checkouts_sum</code> that represents the <code>sum()</code> of
total checkouts per publication year</li>
</ul>
<p>Then, create a <code>ggplot</code> that visualizes the sum of item
checkouts by year of publication. Add one of the themes listed
above.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yearly_checkouts</span> <span class="op">&lt;-</span> <span class="va">booksPlot</span> <span class="op">%&gt;%</span></span>
<span> <span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">pubyear_ymd</span><span class="op">)</span>,</span>
<span>        <span class="va">pubyear_ymd</span> <span class="op">&gt;</span> <span class="st">"1989-01-01"</span> <span class="op">&amp;</span> <span class="va">pubyear_ymd</span> <span class="op">&lt;</span> <span class="st">"2002-01-01"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span> <span class="fu">group_by</span><span class="op">(</span><span class="va">pubyear_ymd</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span> <span class="fu">summarize</span><span class="op">(</span>checkouts_sum <span class="op">=</span> <span class="fu">sum</span><span class="op">(</span><span class="va">tot_chkout</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_checkouts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">checkouts_sum</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">theme_bw</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/04-data-viz-ggplot-rendered-unnamed-chunk-26-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="save-and-export">Save and export<a class="anchor" aria-label="anchor" href="#save-and-export"></a>
</h2>
<hr class="half-width">
<p>After creating your plot, you can save it to a file in your favorite
format. The Export tab in the <strong>Plot</strong> pane in RStudio will
save your plots at low resolution, which will not be accepted by many
journals and will not scale well for posters.</p>
<p>Instead, use the <code>ggsave()</code> function, which allows you
easily change the dimension and resolution of your plot by adjusting the
appropriate arguments (<code>width</code>, <code>height</code> and
<code>dpi</code>). We have been printing our plot output directly to the
console. To use <code>ggsave()</code>, first assign the plot to a
variable in your R environment, such as
<code>yearly_counts_plot</code>.</p>
<p>Make sure you have the <code>fig_output/</code> folder in your
working directory.</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yearly_counts_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">yearly_counts</span>, mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">pubyear_ymd</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span>facets <span class="op">=</span> <span class="fu">vars</span><span class="op">(</span><span class="va">subCollection</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">gray_theme</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of High Usage Books per Year of Publication, \n by Sub-Collection"</span>,</span>
<span>        x <span class="op">=</span> <span class="st">"Year of publication"</span>,</span>
<span>        y <span class="op">=</span> <span class="st">"Number of books"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggsave</span><span class="op">(</span><span class="st">"fig_output/yearly_counts_plot.png"</span>, <span class="va">yearly_counts_plot</span>, width <span class="op">=</span> <span class="fl">15</span>, height <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>With all of this information in hand, please take another five
minutes to either improve one of the plots generated in this exercise or
create a beautiful graph of your own. Use the RStudio <a href="https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf" class="external-link"><strong><code>ggplot2</code></strong>
cheat sheet</a> for inspiration. Here are some ideas:</p>
<ul>
<li>See if you can make the bars white with black outline.</li>
<li>Try using a different color palette (see <a href="https://www.cookbook-r.com/Graphs/Colors_(ggplot2)/" class="external-link">http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/</a>).</li>
</ul>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>
<code>ggplot2</code> is a flexible and useful tool for creating
plots in R.</li>
<li>The data set and coordinate system can be defined using the
<code>ggplot</code> function.</li>
<li>Additional layers, including geoms, are added using the
<code>+</code> operator.</li>
<li>Boxplots are useful for visualizing the distribution of a continuous
variable.</li>
<li>Barplot are useful for visualizing categorical data.</li>
<li>Faceting allows you to generate multiple plots based on a
categorical variable.</li>
</ul>
</div>
</div>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/librarycarpentry/lc-r/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/librarycarpentry/lc-r/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/librarycarpentry/lc-r/" class="external-link">Source</a></p>
				<p><a href="https://github.com/librarycarpentry/lc-r/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.6" class="external-link">varnish (1.0.6)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://librarycarpentry.github.io/lc-r/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://librarycarpentry.github.io/lc-r/aio.html",
  "identifier": "https://librarycarpentry.github.io/lc-r/aio.html",
  "dateCreated": "2019-05-30",
  "dateModified": "2025-06-10",
  "datePublished": "2025-06-10"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

